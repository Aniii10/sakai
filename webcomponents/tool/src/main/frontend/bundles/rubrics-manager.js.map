{
  "version": 3,
  "sources": ["../node_modules/@sakai-ui/sakai-rubrics/src/SakaiRubricEdit.js", "../node_modules/@sakai-ui/sakai-rubrics/sakai-rubric-edit.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SakaiItemDelete.js", "../node_modules/@sakai-ui/sakai-rubrics/sakai-item-delete.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SharingChangeEvent.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SakaiRubricCriterionEdit.js", "../node_modules/@sakai-ui/sakai-rubrics/sakai-rubric-criterion-edit.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SakaiRubricCriterionRatingEdit.js", "../node_modules/@sakai-ui/sakai-rubrics/sakai-rubric-criterion-rating-edit.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SakaiRubricsLanguage.js", "../node_modules/@sakai-ui/sakai-reorderer/src/SakaiReorderer.js", "../node_modules/@sakai-ui/sakai-reorderer/sakai-reorderer.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SakaiRubricCriteria.js", "../node_modules/@sakai-ui/sakai-rubrics/sakai-rubric-criteria.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SakaiRubricCriteriaReadonly.js", "../node_modules/@sakai-ui/sakai-rubrics/sakai-rubric-criteria-readonly.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SakaiRubric.js", "../node_modules/@sakai-ui/sakai-rubrics/sakai-rubric.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SakaiRubricsList.js", "../node_modules/@sakai-ui/sakai-rubrics/sakai-rubrics-list.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SakaiRubricReadonly.js", "../node_modules/@sakai-ui/sakai-rubrics/sakai-rubric-readonly.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SakaiRubricsHelpers.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SakaiRubricsSharedList.js", "../node_modules/@sakai-ui/sakai-rubrics/sakai-rubrics-shared-list.js", "../node_modules/@sakai-ui/sakai-rubrics/src/SakaiRubricsManager.js", "../node_modules/@sakai-ui/sakai-rubrics/sakai-rubrics-manager.js"],
  "sourcesContent": ["import { RubricsElement } from \"./RubricsElement.js\";\nimport { html } from \"lit\";\n\nexport class SakaiRubricEdit extends RubricsElement {\n\n  static properties = { rubric: { type: Object } };\n\n  constructor() {\n\n    super();\n\n    this.rubricClone = {};\n  }\n\n  set rubric(value) {\n\n    const old = this._rubric;\n    this._rubric = value;\n\n    this.rubricClone = { ...value };\n    if (this.rubricClone.new) {\n      this.updateComplete.then(() => bootstrap.Modal.getOrCreateInstance(this.querySelector(`#edit-rubric-${value.id}`)).show());\n    }\n\n    this.requestUpdate(\"rubric\", old);\n  }\n\n  get rubric() { return this._rubric; }\n\n  firstUpdated() {\n\n    const modal = this.querySelector(`#edit-rubric-${this.rubric.id}`);\n\n    modal.addEventListener(\"shown.bs.modal\", () => {\n      modal.querySelector(\"input[type='text'\").select();\n    });\n\n    modal.addEventListener(\"hidden.bs.modal\", () => {\n      this.rubric.new = false;\n    });\n  }\n\n  render() {\n\n    return html`\n      <button class=\"btn btn-icon edit-button\"\n          type=\"button\"\n          data-bs-toggle=\"modal\"\n          data-bs-target=\"#edit-rubric-${this.rubric.id}\"\n          aria-controls=\"edit-rubric-${this.rubric.id}\"\n          aria-expanded=\"false\"\n          title=\"${this.tr(\"edit_rubric\")} ${this.rubric.title}\"\n          aria-label=\"${this.tr(\"edit_rubric\")} ${this.rubric.title}\">\n        <i class=\"si si-edit\"></i>\n      </button>\n\n      <div class=\"modal modal-sm fade\"\n          id=\"edit-rubric-${this.rubric.id}\"\n          tabindex=\"-1\"\n          data-bs-backdrop=\"static\"\n          aria-labelledby=\"edit-rubric-${this.rubric.id}-label\"\n          aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title fs-5\" id=\"edit-rubric-${this.rubric.id}-label\">${this.rubric.title}</h5>\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"${this._i18n.close_dialog}\"></button>\n            </div>\n            <div class=\"modal-body\">\n              <div>\n                <label class=\"label-rubrics form-label\" for=\"rubric_title_edit\">\n                  ${this._i18n.rubric_title}\n                </label>\n                <input title=\"${this.tr(\"rubric_title\")}\"\n                    class=\"form-control\"\n                    id=\"rubric-title-edit-${this.rubric.id}\"\n                    type=\"text\"\n                    value=\"${this.rubricClone.title}\"\n                    maxlength=\"255\" autofocus>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button class=\"btn btn-primary\" type=\"button\" @click=${this._saveEdit} data-rubric-id=\"${this.rubric.id}\">\n                ${this._i18n.save}\n              </button>\n              <button class=\"btn btn-secondary\" id=\"rubric-cancel-${this.rubric.id}\" type=\"button\" data-bs-dismiss=\"modal\" @click=${this._cancelEdit}>\n                ${this._i18n.cancel}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  _saveEdit(e) {\n\n    e.stopPropagation();\n    const title = e.target.closest(\".modal-content\").querySelector(\"input\").value;\n    document.getElementById(`rubric-edit-${e.target.dataset.rubricId}`).dispatchEvent(new CustomEvent(\"update-rubric-title\", { detail: title }));\n    bootstrap.Modal.getInstance(this.querySelector(`#edit-rubric-${e.target.dataset.rubricId}`)).hide();\n  }\n\n  _cancelEdit() {\n    //Reset input values, in case they were changed\n    this.querySelector(`#rubric-title-edit-${this.rubric.id}`).value = this.rubric.title;\n  }\n}\n", "import { SakaiRubricEdit } from \"./src/SakaiRubricEdit.js\";\n\ncustomElements.define(\"sakai-rubric-edit\", SakaiRubricEdit);\n", "import { RubricsElement } from \"./RubricsElement.js\";\nimport { html } from \"lit\";\n\nexport class SakaiItemDelete extends RubricsElement {\n\n  static properties = {\n\n    rubricId: { attribute: \"rubric-id\", type: String },\n    siteId: { attribute: \"site-id\", type: String },\n    rubric: { type: Object },\n    criterionId: { attribute: \"criterion-id\", type: String },\n    criterion: { type: Object },\n  };\n\n  constructor() {\n\n    super();\n\n    this._rubric;\n    this._criterion;\n  }\n\n  set rubric(newValue) {\n\n    this._rubric = newValue;\n    this.item = newValue;\n    this.type = \"rubric\";\n  }\n\n  get rubric() { return this._rubric; }\n\n  set criterion(newValue) {\n\n    this._criterion = newValue;\n    this.item = newValue;\n    this.type = \"criterion\";\n  }\n\n  get criterion() { return this._criterion; }\n\n  render() {\n\n    return html`\n      <button\n          class=\"btn btn-sm\"\n          data-bs-toggle=\"modal\"\n          data-bs-target=\"#delete-${this.type}-${this.item.id}\"\n          aria-controls=\"delete-${this.type}-${this.item.id}\"\n          aria-expanded=\"false\"\n          title=\"${this.tr(\"remove\", [ this.item.title ])}\"\n          aria-label=\"${this.tr(\"remove\", [ this.item.title ])}\"\n          @click=${this._stopPropagation}>\n        <span class=\"fa fa-times pe-none\" style=\"pointer-events: none;\"></span>\n      </button>\n\n      <div id=\"delete-${this.type}-${this.item.id}\"\n          tabindex=\"-1\"\n          class=\"modal\"\n          data-bs-backdrop=\"static\"\n          aria-labelledby=\"delete-modal-label-${this.type}-${this.item.id}\"\n          aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\" id=\"delete-modal-label-${this.type}-${this.item.id}\">\n                ${this.tr(\"delete_item_title\", [ this.type === \"criterion\" ? this._i18n.criterion : this._i18n.rubric ])}\n              </h5>\n              <button type=\"button\"\n                  class=\"btn-close\"\n                  data-bs-dismiss=\"modal\"\n                  aria-label=\"${this.tr(\"close_dialog\")}\">\n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <div>${this.tr(\"confirm_remove\", [ this.item.title ])}</div>\n            </div>\n            <div class=\"modal-footer\">\n              <div class=\"text-end\">\n                <button type=\"button\"\n                    class=\"btn btn-primary\"\n                    title=\"${this.tr(\"confirm_remove\")}\"\n                    @click=${this.saveDelete}>\n                  ${this._i18n.remove_label}\n                </button>\n                <button type=\"button\"\n                    class=\"btn btn-secondary btn-xs\"\n                    data-bs-dismiss=\"modal\"\n                    @click=${this.cancelDelete}>\n                  <sr-lang key=\"cancel\">Cancel</sr-lang>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  hideToolTip() {\n    bootstrap.Modal.getOrCreateInstance(this.querySelector(\".modal\")).hide();\n  }\n\n  cancelDelete(e) {\n\n    e.stopPropagation();\n    this.hideToolTip();\n  }\n\n  saveDelete(e) {\n\n    e.stopPropagation();\n    let url = `/api/sites/${this.siteId}/rubrics/`;\n\n    if (this.type === \"criterion\") {\n      url += `${this.rubricId}/criterions/${this.criterion.id}`;\n    } else {\n      url += this.rubric.id;\n    }\n\n    fetch(url, {\n      method: \"DELETE\",\n      credentials: \"include\",\n    })\n    .then(r => {\n\n      if (r.ok) {\n\n        this.hideToolTip();\n        this.dispatchEvent(new CustomEvent(\"delete-item\", { detail: this.item, bubbles: true, composed: true }));\n      } else {\n        throw new Error(\"Network error while deleting rubric/criterion\");\n      }\n    })\n    .catch (error => console.error(error));\n  }\n}\n", "import { SakaiItemDelete } from \"./src/SakaiItemDelete.js\";\n\ncustomElements.define(\"sakai-item-delete\", SakaiItemDelete);\n", "export class SharingChangeEvent extends CustomEvent {\n\n  constructor() {\n    super(\"sharing-change\", { bubbles: true, composed: true });\n  }\n}\n", "import { RubricsElement } from \"./RubricsElement.js\";\nimport { html } from \"lit\";\nimport { ifDefined } from \"lit/directives/if-defined.js\";\nimport { SharingChangeEvent } from \"./SharingChangeEvent.js\";\nimport \"@sakai-ui/sakai-editor/sakai-editor.js\";\n\nexport class SakaiRubricCriterionEdit extends RubricsElement {\n\n  static properties = {\n\n    siteId: { attribute: \"site-id\", type: String },\n    rubricId: { attribute: \"rubric-id\", type: String },\n    criterion: { type: Object },\n    isCriterionGroup: { attribute: \"is-criterion-group\", type: Boolean },\n    textarea: { type: Boolean },\n  };\n\n  constructor() {\n\n    super();\n\n    this.criterion = {};\n    this.criterionClone = {};\n  }\n\n  set criterion(value) {\n\n    const old = this._criterion;\n    this._criterion = value;\n    this.criterionClone = { ...value };\n    this.requestUpdate(\"criterion\", old);\n    if (this.criterionClone.new) {\n      this.updateComplete.then(() => bootstrap.Modal.getOrCreateInstance(this.querySelector(`#edit-criterion-${value.id}`)).show());\n    }\n  }\n\n  get criterion() { return this._criterion; }\n\n  firstUpdated() {\n\n    const modal = this.querySelector(`#edit-criterion-${this.criterion.id}`);\n\n    modal.addEventListener(\"shown.bs.modal\", () => {\n\n      this.closest(\"[draggable='true']\")?.setAttribute(\"draggable\", \"false\");\n      this.querySelector(`#criterion-title-edit-${this.criterion.id}`).select();\n    });\n\n    modal.addEventListener(\"hidden.bs.modal\", () => {\n      this.closest(\"[draggable='false']\")?.setAttribute(\"draggable\", \"true\");\n    });\n  }\n\n  shouldUpdate(changedProperties) {\n    return super.shouldUpdate(changedProperties) && this.criterion;\n  }\n\n  render() {\n\n    return html`\n      <button class=\"btn btn-icon edit-criterion-button\"\n          type=\"button\"\n          data-bs-toggle=\"modal\"\n          data-bs-target=\"#edit-criterion-${this.criterion.id}\"\n          aria-controls=\"edit-criterion-${this.criterion.id}\"\n          aria-expanded=\"false\"\n          title=\"${this._i18n.edit_criterion} ${this.criterion.title}\"\n          aria-label=\"${this._i18n.edit_criterion} ${this.criterion.title}\">\n        <i class=\"si si-edit\"></i>\n      </button>\n\n      <div class=\"modal fade\"\n          id=\"edit-criterion-${this.criterion.id}\"\n          tabindex=\"-1\"\n          data-bs-backdrop=\"static\"\n          aria-labelledby=\"edit-criterion-${this.criterion.id}-label\"\n          aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title fs-5\" id=\"edit-criterion-${this.criterion.id}-label\">${this.criterion.title}</h5>\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"${this._i18n.close_dialog}\"></button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"mb-3\">\n                <label class=\"label-rubrics form-label\" for=\"criterion-title-edit-${this.criterion.id}\">\n                  ${this._i18n.criterion_title}\n                </label>\n                <input title=\"${this._i18n.criterion_title}\"\n                    class=\"form-control\"\n                    id=\"criterion-title-edit-${this.criterion.id}\"\n                    type=\"text\"\n                    value=\"${this.criterionClone.title}\"\n                    maxlength=\"255\">\n              </div>\n              <label class=\"label-rubrics form-label\" for=\"criterion-description-edit-${this.criterion.id}\">\n                ${this.isCriterionGroup ? html`\n                  ${this._i18n.criterion_group_description}\n                ` : html`\n                  ${this._i18n.criterion_description}\n                `}\n              </label>\n              <sakai-editor id=\"criterion-description-edit-${this.criterion.id}\"\n                toolbar=\"BasicText\"\n                content=\"${ifDefined(this.criterionClone.description)}\"\n                @changed=${this.updateCriterionDescription}\n                ?textarea=${this.textarea}>\n              </sakai-editor>\n            </div>\n            <div class=\"modal-footer\">\n              <div>\n                <button class=\"btn btn-primary\" type=\"button\" @click=${this._saveEdit}>\n                  ${this._i18n.save}\n                </button>\n                <button id=\"criterion-cancel-${this.criterion.id}\" class=\"btn btn-secondary\" type=\"button\" data-bs-dismiss=\"modal\" @click=${this._cancelEdit}>\n                  ${this._i18n.cancel}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  _saveEdit(e) {\n\n    e.stopPropagation();\n\n    const title = e.target.closest(\".modal-content\").querySelector(\"input\").value;\n    const description = e.target.closest(\".modal-content\").querySelector(\"sakai-editor\").getContent();\n\n    const body = JSON.stringify([\n      { \"op\": \"replace\", \"path\": \"/title\", \"value\": title },\n      { \"op\": \"replace\", \"path\": \"/description\", \"value\": description },\n    ]);\n\n    const url = `/api/sites/${this.siteId}/rubrics/${this.rubricId}/criteria/${this.criterion.id}`;\n    fetch(url, {\n      credentials: \"include\",\n      headers: { \"Content-Type\": \"application/json-patch+json\" },\n      method: \"PATCH\",\n      body\n    })\n    .then(r => {\n\n      if (r.ok) {\n        return r.json();\n      }\n\n      throw new Error(`Network error while updating criterion at url ${url}`);\n    })\n    .then(criterion => {\n\n      const originalEditor = document.getElementById(`criterion-edit-${this.criterion.id}`);\n      originalEditor.dispatchEvent(new CustomEvent(\"criterion-edited\", { detail: criterion }));\n      originalEditor.dispatchEvent(new SharingChangeEvent());\n    })\n    .catch (error => console.error(error));\n\n    bootstrap.Modal.getInstance(this.querySelector(`#edit-criterion-${this.criterion.id}`)).hide();\n  }\n\n  _cancelEdit() {\n\n    this.criterion.new = false;\n    this.criterionClone.new = false;\n\n    //Reset input values, in case they were changed\n    this.querySelector(`#criterion-title-edit-${this.criterion.id}`).value = this.criterion.title;\n    this.querySelector(`#criterion-description-edit-${this.criterion.id}`).setContent(this.criterion.description);\n  }\n\n  updateCriterionDescription(e) { this.criterionClone.description = e.detail.content; }\n}\n", "import { SakaiRubricCriterionEdit } from \"./src/SakaiRubricCriterionEdit.js\";\n\ncustomElements.define(\"sakai-rubric-criterion-edit\", SakaiRubricCriterionEdit);\n", "import { RubricsElement } from \"./RubricsElement.js\";\nimport { html, nothing } from \"lit\";\nimport { ifDefined } from \"lit/directives/if-defined.js\";\n\nexport class SakaiRubricCriterionRatingEdit extends RubricsElement {\n\n  static properties = {\n\n    rating: { type: Object },\n    criterionId: { attribute: \"criterion-id\", type: String },\n    removable: { attribute: \"removable\", type: Boolean },\n    isLocked: { attribute: \"is-locked\", type: Boolean },\n    minpoints: Number,\n    maxpoints:  Number,\n  };\n\n  set rating(value) {\n\n    const old = this._rating;\n    this._rating = value;\n    this.requestUpdate(\"rating\", old);\n\n    // If this is a newly created rating, open the editor modal\n    if (this._rating.new) {\n      this.updateComplete.then(() => bootstrap.Modal.getOrCreateInstance(this.querySelector(`#edit-criterion-rating-${value.id}`)).show());\n    }\n  }\n\n  get rating() { return this._rating; }\n\n  firstUpdated() {\n\n    const modal = this.querySelector(`#edit-criterion-rating-${this.rating.id}`);\n\n    modal.addEventListener(\"shown.bs.modal\", () => {\n\n      this.closest(\".rating-item\")?.setAttribute(\"draggable\", \"false\");\n      this.closest(\".criterion-row\")?.setAttribute(\"draggable\", \"false\");\n      this.querySelector(`#rating-title-edit-${this.rating.id}`).select();\n    });\n\n    modal.addEventListener(\"hidden.bs.modal\", () => {\n      this.closest(\".rating-item\")?.setAttribute(\"draggable\", \"true\");\n      this.closest(\".criterion-row\")?.setAttribute(\"draggable\", \"true\");\n    });\n  }\n\n  render() {\n\n    return html`\n      <button class=\"btn btn-icon\"\n          type=\"button\"\n          data-bs-toggle=\"modal\"\n          data-bs-target=\"#edit-criterion-rating-${this.rating.id}\"\n          aria-controls=\"edit-criterion-rating-${this.rating.id}\"\n          aria-expanded=\"false\"\n          title=\"${this._i18n.edit_rating} ${this.rating.title}\"\n          aria-label=\"${this._i18n.edit_rating} ${this.rating.title}\">\n        <i class=\"si si-edit\"></i>\n      </button>\n\n      <div class=\"modal modal-sm fade\"\n          id=\"edit-criterion-rating-${this.rating.id}\"\n          tabindex=\"-1\"\n          data-bs-backdrop=\"static\"\n          aria-labelledby=\"edit-criterion-rating-${this.rating.id}-label\"\n          aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title fs-5\" id=\"edit-criterion-rating-${this.rating.id}-label\">${this.rating.title}</h5>\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"${this._i18n.close_dialog}\"></button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"d-flex\">\n                <div class=\"\">\n                  <label class=\"label-rubrics form-label\" for=\"rating-title-edit-${this.rating.id}\">${this._i18n.rating_title}</label>\n                  <input type=\"text\"\n                      id=\"rating-title-edit-${this.rating.id}\"\n                      class=\"form-control\"\n                      .value=${this.rating.title}\n                      maxlength=\"255\">\n                </div>\n                <div class=\"ms-auto points ${this.isLocked ? \"d-none\" : \"\"}\">\n                  <label class=\"label-rubrics form-label\" for=\"rating-points-${this.rating.id}\">${this._i18n.points}</label>\n                  <input type=\"number\"\n                      id=\"rating-points-${this.rating.id}\"\n                      class=\"form-control hide-input-arrows\"\n                      name=\"quantity\"\n                      .value=${this.rating.points}\n                      min=\"${ifDefined(this.minpoints)}\"\n                      max=\"${ifDefined(this.maxpoints)}\">\n                </div>\n              </div>\n              <div class=\"form-group\">\n                <label class=\"label-rubrics\" for=\"rating-description-${this.rating.id}\">${this._i18n.rating_description}</label>\n                <textarea name=\"\" id=\"rating-description-${this.rating.id}\" class=\"form-control\" .value=${this.rating.description}></textarea>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button class=\"btn btn-xs btn-primary\" title=\"${this._i18n.save} ${this.rating.title}\" @click=${this._saveEdit}>\n                ${this._i18n.save}\n              </button>\n              ${!this.isLocked ? html`\n                <button class=\"btn btn-secondary delete\" title=\"${this.removeButtonTitle()}\" ?disabled=\"${!this.removable}\" @click=${this.deleteRating}>${this._i18n.remove_label}</button>\n              ` : nothing }\n              <button class=\"btn btn-secondary btn-xs cancel\" title=\"${this._i18n.cancel}\" data-bs-dismiss=\"modal\" @click=${this.cancelEdit}>\n                ${this._i18n.cancel}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  resetFields() {\n\n    document.getElementById(`rating-title-edit-${this.rating.id}`).value = this.rating.title;\n    document.getElementById(`rating-points-${this.rating.id}`).value = this.rating.points;\n    document.getElementById(`rating-description-${this.rating.id}`).value = this.rating.description;\n  }\n\n  cancelEdit(e) {\n\n    e.stopPropagation();\n    this.resetFields();\n  }\n\n  _saveEdit(e) {\n\n    e.stopPropagation();\n\n    this.rating.title = document.getElementById(`rating-title-edit-${this.rating.id}`).value;\n\n    if (!this.isLocked) {\n\n      const points = parseFloat(document.getElementById(`rating-points-${this.rating.id}`).value);\n      // Check points value. Blank breaks things.\n      if (isFinite(points)) {\n        // Round user input to two digits.\n        this.rating.points = points.toFixed(2);\n      } // Else, previous saved score or default one will be used.\n    }\n\n    this.rating.description = document.getElementById(`rating-description-${this.rating.id}`).value;\n    this.rating.criterionId = this.criterionId;\n\n    this.resetFields();\n\n    this.dispatchEvent(new CustomEvent(\"save-rating\", { detail: { rating: this.rating, criterionId: this.criterionId } }));\n\n    bootstrap.Modal.getInstance(this.querySelector(`#edit-criterion-rating-${this.rating.id}`)).hide();\n  }\n\n  deleteRating(e) {\n\n    e.stopPropagation();\n\n    this.rating.criterionId = this.criterionId;\n    this.dispatchEvent(new CustomEvent(\"delete-rating\", { detail: this.rating }));\n    bootstrap.Modal.getInstance(this.querySelector(`#edit-criterion-rating-${this.rating.id}`)).hide();\n  }\n\n  removeButtonTitle() {\n\n    return this.removable ? `${this._i18n.remove_label} ${this.rating.title}`\n      : this._i18n.remove_rating_disabled;\n  }\n}\n", "import { SakaiRubricCriterionRatingEdit } from \"./src/SakaiRubricCriterionRatingEdit.js\";\n\ncustomElements.define(\"sakai-rubric-criterion-rating-edit\", SakaiRubricCriterionRatingEdit);\n", "import { RubricsElement } from \"./RubricsElement.js\";\nimport { html } from \"lit\";\nimport { loadProperties, tr as translate } from \"@sakai-ui/sakai-i18n\";\n\nexport class SakaiRubricsLanguage extends RubricsElement {\n\n  static properties = {\n\n    key: { type: String },\n    values: { type: Array }\n  };\n\n  render() {\n    return html`${this.translate(this.key)}`;\n  }\n\n  translate(key) {\n    return tr(key, this.values);\n  }\n\n  static loadTranslations(cache) {\n    return loadProperties({ bundle: \"rubrics\", cache });\n  }\n}\n\nexport function tr(key, values) {\n  return translate(\"rubrics\", key, values);\n}\n", "import { html, LitElement } from \"lit\";\n\n/**\n * @example\n *  <sakai-reorderer>\n *    <div id=\"container\">\n *      <div data-reorderable-id=\"item1\"><span class=\"drag-handle\"></span><span>Item 1</span></div>\n *      <div data-reorderable-id=\"item2\"><span class=\"drag-handle\"></span><span>Item 2</span></div>\n *      <div data-reorderable-id=\"item3\"><span class=\"drag-handle\"></span><span>Item 3</span></div>\n *      <div data-reorderable-id=\"item4\"><span class=\"drag-handle\"></span><span>Item 4</span></div>\n *    </div>\n *  </sakai-reorderer>\n *\n * A tag which is used to wrap a sequence of elements which you would like to be reorderable. The\n * tag expecs a sequence of reorderable elements contained in a \"container\" element. Each child of\n * the container needs a unique reorderableId as a data attribute. When this code reorders the\n * elements, all it does is fire an event with the new sequence in the event payload. It is up to\n * the user of this tag to do something with that new sequence. Typically, the caller would be a lit\n * component, and it would reorder its data and trigger a re-render.\n *\n * let reorderedEvent = new CustomEvent(\"reordered\"\n *          , { detail: {reorderedIds: [ \"item2\", \"item1\", .. ], data: draggedElement.dataset } });\n *\n * As you can see from that example, the reordered event has the dataset of the dragged element as a\n * part of its payload. This lets the caller attach data to help it make sense of the reordered\n * elements.\n *\n * This tag also takes care of keyboard navigation, using the 'e' and 'd' keys to move up/down or\n * left/right.\n *\n * @element sakai-reorderer\n * @property {boolean} horizontal - Indicates that ordering goes from left to right, not top to\n *                                  bottom\n *\n * @extends LitElement\n * @see {@link https://lit.dev/docs/v1/api/lit-element/LitElement/}\n */\nexport class SakaiReorderer extends LitElement {\n\n  static properties = { horizontal: { type: Boolean } };\n\n  constructor() {\n\n    super();\n\n    this._dragStartListener = e => {\n\n      e.stopPropagation();\n\n      this.draggingElement = e.target;\n      e.target.classList.add(\"dragging\");\n    };\n\n    this._dragOverListener = e => {\n\n      e.stopPropagation();\n\n      if (this.draggingElement && this.container.contains(this.draggingElement)) {\n        e.preventDefault();\n      }\n    };\n\n    this._dragEndListener = e => {\n\n      e.preventDefault();\n      e.stopPropagation();\n      this.draggingElement = undefined;\n      e.target.classList.remove(\"dragging\");\n    };\n\n    this._dropListener = e => {\n\n      e.stopPropagation();\n\n      const afterElement = this._getDragAfterElement(this.container, this.horizontal ? e.clientX : e.clientY);\n\n      const total = this._reorderableIds.length;\n\n      const draggingIndex = this._reorderableIds.findIndex(id => id === this.draggingElement.dataset.reorderableId);\n      const afterIndex = afterElement ? this._reorderableIds.findIndex(id => id === afterElement.dataset.reorderableId) : this._reorderableIds.length - 1;\n      this._reorderableIds.splice(draggingIndex, 1);\n\n      if (afterIndex === 0) {\n        this._reorderableIds.unshift(this.draggingElement.dataset.reorderableId);\n      } else if (afterIndex === total - 1) {\n        this._reorderableIds.push(this.draggingElement.dataset.reorderableId);\n      } else {\n        this._reorderableIds.splice(afterIndex, 0, this.draggingElement.dataset.reorderableId);\n      }\n\n      this.dispatchEvent(new CustomEvent(\"reordered\", { detail: { reorderedIds: this._reorderableIds, data: this.draggingElement.dataset } }));\n    };\n\n    this._dragEnterListener = e => e.stopPropagation();\n\n    this._dragLeaveListener = e => e.stopPropagation();\n\n    this._dragListener = e => e.stopPropagation();\n\n    this._keyupListener = e => {\n\n      e.stopPropagation();\n\n      const reorderable = e.target.closest(\"[draggable='true']\");\n      const reorderableId = reorderable?.dataset.reorderableId;\n\n      if ([ \"e\", \"d\" ].includes(e.key.toLowerCase())) {\n        const index = this._reorderableIds.indexOf(reorderableId);\n\n        let changed = false;\n\n        if (e.key.toLowerCase() === \"e\") {\n          if (reorderable.previousElementSibling) {\n            this._reorderableIds.splice(index, 1);\n            this._reorderableIds.splice(index - 1, 0, reorderableId);\n            changed = true;\n          }\n        } else if (e.key.toLowerCase() === \"d\") {\n          if (reorderable.nextElementSibling) {\n            this._reorderableIds.splice(index, 1);\n            this._reorderableIds.splice(index + 1, 0, reorderableId);\n            changed = true;\n          }\n        }\n\n        if (changed) {\n          this.dispatchEvent(new CustomEvent(\"reordered\", { detail: { reorderedIds: this._reorderableIds, data: reorderable.dataset } }));\n        }\n      }\n    };\n  }\n\n  /**\n   * @private\n   */\n  _getDragAfterElement(container, coord) {\n\n    return [ ...container.querySelectorAll(\"[draggable='true']:not(.dragging)\") ]\n      .reduce((closest, child) => {\n\n        const box = child.getBoundingClientRect();\n        const offset = coord - (this.horizontal ? box.left : box.top) - (this.horizontal ? box.width : box.height) / 2;\n        if (offset < 0 && offset > closest.offset) {\n          return { offset, element: child };\n        }\n        return closest;\n      }, { offset: Number.NEGATIVE_INFINITY }).element;\n  }\n\n  /**\n   * @private\n   */\n  _setupKeyboard(reorderable) {\n    reorderable.querySelector(\".drag-handle\")?.addEventListener(\"keyup\", this._keyupListener);\n  }\n\n  /**\n   * @private\n   * @override\n   */\n  updated() {\n\n    this.container = this.shadowRoot.querySelector(\"slot\").assignedNodes().find(n => n.nodeType === Node.ELEMENT_NODE);\n\n    this._reorderableIds = [];\n\n    [ ...this.container.children ].filter(n => n.nodeType === Node.ELEMENT_NODE).forEach(reorderable => {\n\n      this._setupKeyboard(reorderable);\n\n      this._reorderableIds.push(reorderable.dataset.reorderableId);\n\n      !reorderable.hasAttribute(\"draggable\") && reorderable.setAttribute(\"draggable\", \"true\");\n\n      let dragHandle = reorderable.querySelector(\".drag-handle\");\n\n      if (!dragHandle && reorderable.getAttribute(\"draggable\") === \"true\") {\n        dragHandle = document.createElement(\"span\");\n        dragHandle.classList.add(\"si\", \"si-drag-handle\", \"drag-handle\");\n        dragHandle.style.cursor = \"grab;\";\n        reorderable.insertBefore(dragHandle, reorderable.firstChild);\n      }\n\n      reorderable.addEventListener(\"dragstart\", this._dragStartListener);\n      reorderable.addEventListener(\"drag\", this._dragListener);\n      reorderable.addEventListener(\"dragend\", this._dragEndListener);\n    });\n\n    this.container.addEventListener(\"dragenter\", this._dragEnterListener);\n    this.container.addEventListener(\"dragover\", this._dragOverListener);\n    this.container.addEventListener(\"dragleave\", this._dragLeaveListener);\n    this.container.addEventListener(\"drop\", this._dropListener);\n  }\n\n  /**\n   * @private\n   * @override\n   */\n  render() {\n\n    return html`\n      <slot>\n      </slot>\n    `;\n  }\n}\n", "import { SakaiReorderer } from './src/SakaiReorderer.js';\n\ncustomElements.define('sakai-reorderer', SakaiReorderer);\n", "import { RubricsElement } from \"./RubricsElement.js\";\nimport { html, nothing } from \"lit\";\nimport { unsafeHTML } from \"lit/directives/unsafe-html.js\";\nimport { repeat } from \"lit/directives/repeat.js\";\nimport \"../sakai-rubric-edit.js\";\nimport \"../sakai-item-delete.js\";\nimport \"../sakai-rubric-criterion-edit.js\";\nimport \"../sakai-rubric-criterion-rating-edit.js\";\nimport { SharingChangeEvent } from \"./SharingChangeEvent.js\";\nimport { tr } from \"./SakaiRubricsLanguage.js\";\nimport \"@sakai-ui/sakai-reorderer/sakai-reorderer.js\";\n\nexport class SakaiRubricCriteria extends RubricsElement {\n\n  static properties = {\n\n    rubricId: { attribute: \"rubric-id\", type: String },\n    siteId: { attribute: \"site-id\", type: String },\n    criteria: { type: Array },\n    weighted: { type: Boolean },\n    totalWeight: { attribute: \"total-weight\", type: String },\n    validWeight: { attribute: \"valid-weight\", type: Boolean },\n    maxPoints: { attribute: \"max-points\", type: String },\n    minPoints: { attribute: \"min-points\", type: String },\n    isLocked: { attribute: \"is-locked\", type: Boolean },\n    isDraft: { attribute: \"is-draft\", type: Boolean },\n  };\n\n  _criteriaReordered(e) {\n\n    this.criteria = e.detail.reorderedIds.map(id => this.criteriaMap.get(parseInt(id)));\n\n    // Focus the moved criterion's drag handle\n    this.updateComplete.then(() => {\n\n      this.querySelectorAll(\"sakai-reorderer\").forEach(el => el.requestUpdate());\n      this.querySelector(`[data-criterion-id=\"${e.detail.data.criterionId}\"] .drag-handle`).focus();\n    });\n\n    const url = `/api/sites/${this.siteId}/rubrics/${this.rubricId}/criteria/sort`;\n    fetch(url, {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      credentials: \"include\",\n      body: JSON.stringify(e.detail.reorderedIds),\n    })\n    .then(r => {\n\n      if (!r.ok) {\n        throw new Error(\"Network error while saving criteria sort\");\n      }\n    })\n    .catch (error => console.error(error));\n  }\n\n  _ratingsReordered(e) {\n\n    e.stopPropagation();\n\n    const criterionId = e.detail.data.criterionId;\n    const criterion = this.criteria.find(c => c.id == criterionId);\n\n    // Reorder the ratings based on the sort result\n    criterion.ratings = e.detail.reorderedIds.map(id => criterion.ratings.find(r => r.id == id));\n    this.requestUpdate();\n\n    // Focus the moved rating's drag handle\n    this.updateComplete.then(() => {\n      this.querySelector(`[data-rating-id=\"${e.detail.data.ratingId}\"] .drag-handle`).focus();\n    });\n\n    const url = `/api/sites/${this.siteId}/rubrics/${this.rubricId}/criteria/${criterionId}/ratings/sort`;\n    fetch(url, {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      credentials: \"include\",\n      body: JSON.stringify(e.detail.reorderedIds),\n    })\n    .then(r => {\n\n      if (!r.ok) {\n        throw new Error(`Network error while saving ratings sort at ${url}`);\n      }\n\n    })\n    .catch (error => console.error(error));\n  }\n\n  letShareKnow() { this.dispatchEvent(new SharingChangeEvent()); }\n\n  _handleSortedRatings(e) {\n\n    e && e.stopPropagation();\n\n    const criterionId = e.target.dataset.criterionId;\n    const criterion = this.criteria.find(c => c.id == criterionId);\n\n    const sortedIds = Array.from(this.querySelectorAll(`#cr-table-${criterionId} .rating-item`)).map(r => r.dataset.ratingId);\n\n    // Reorder the ratings based on the sort result\n    criterion.ratings = sortedIds.map(id => criterion.ratings.find(r => r.id == id));\n\n    const url = `/api/sites/${this.siteId}/rubrics/${this.rubricId}/criteria/${criterionId}/ratings/sort`;\n    fetch(url, {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      credentials: \"include\",\n      body: JSON.stringify(sortedIds),\n    })\n    .then(r => {\n\n      if (!r.ok) {\n        throw new Error(`Network error while saving ratings sort at ${url}`);\n      }\n    })\n    .catch (error => console.error(error));\n  }\n\n  saveRating(e) {\n\n    e.stopPropagation();\n\n    const url = `/api/sites/${this.siteId}/rubrics/${this.rubricId}/criteria/${e.detail.criterionId}/ratings/${e.detail.rating.id}`;\n    fetch(url, {\n      credentials: \"include\",\n      headers: { \"Content-Type\": \"application/json\" },\n      method: \"POST\",\n      body: JSON.stringify(e.detail.rating)\n    })\n    .then(r => {\n\n      if (r.ok) {\n        const criterion = this.criteria.find(c => c.id == e.detail.criterionId);\n        const rating = criterion.ratings.find(rat => rat.id == e.detail.rating.id);\n        rating.title = e.detail.rating.title;\n        rating.description = e.detail.rating.description;\n        rating.points = e.detail.rating.points;\n        rating.new = false;\n        this.requestUpdate();\n        this.updateComplete.then(() => this.querySelector(`#criterion-ratings-reorderer-${e.detail.criterionId}`).requestUpdate());\n        this.letShareKnow();\n        this.dispatchEvent(new CustomEvent(\"refresh-total-weight\", { detail: { criteria: this.criteria } }));\n      } else {\n        throw new Error(\"Network error while saving rating\");\n      }\n    })\n    .catch(error => console.error(error));\n  }\n\n  deleteCriterion(e) {\n\n    e.stopPropagation();\n    const index = this.criteria.findIndex(c => c.id === e.detail.id);\n    this.criteria.splice(index, 1);\n    this.criteriaMap.delete(e.detail.id);\n    this.requestUpdate();\n    this.updateComplete.then(() => this.querySelector(\"sakai-reorderer\").requestUpdate());\n    this.letShareKnow();\n    this.dispatchEvent(new CustomEvent(\"refresh-total-weight\", { detail: { criteria: this.criteria } }));\n  }\n\n  emitWeightChanged(e) {\n\n    if (e.target.value == \"\") {\n      e.target.value = 0;\n    }\n    let value = e.target.value.replace(\",\", \".\");\n    value = parseFloat(value);\n    if (isNaN(value)) {\n      value = 0;\n    }\n    const id = parseInt(e.target.getAttribute(\"data-criterion-id\"));\n    if (isNaN(id)) {\n      return;\n    }\n    this.letShareKnow();\n    this.dispatchEvent(new CustomEvent(\"weight-changed\", { detail: { criterionId: id, value, criteria: this.criteria } }));\n    this.requestUpdate();\n  }\n\n  addRating(e) {\n\n    const criterionId = e.target.dataset.criterionId;\n    const ratingPos = e.target.dataset.ratingPos;\n\n    const url = `/api/sites/${this.siteId}/rubrics/${this.rubricId}/criteria/${criterionId}/ratings/default?position=${ratingPos}`;\n    fetch(url, {\n      credentials: \"include\",\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n    .then(r => {\n\n      if (r.ok) {\n        return r.json();\n      }\n      throw new Error(\"Network error while adding rating\");\n    })\n    .then(nr => this.addRatingResponse(criterionId, ratingPos, nr))\n    .catch (error => console.error(error));\n  }\n\n  addRatingResponse(criterionId, ratingPos, newRating) {\n\n    newRating.new = true;\n\n    const criterion = this.criteriaMap.get(parseInt(criterionId));\n\n    if (!criterion.ratings) criterion.ratings = [];\n\n    criterion.ratings.splice(parseInt(ratingPos), 0, newRating);\n\n    this.letShareKnow();\n    this.requestUpdate();\n  }\n\n  deleteRating(e) {\n\n    e.stopPropagation();\n\n    const criterion = this.criteriaMap.get(parseInt(e.detail.criterionId));\n\n    if (!criterion) {\n      console.error(`No criterion found with id ${e.detail.criterionId}`);\n      return;\n    }\n\n    const url = `/api/sites/${this.siteId}/rubrics/${this.rubricId}/criteria/${e.detail.criterionId}/ratings/${e.detail.id}`;\n    fetch(url, {\n      method: \"DELETE\",\n      credentials: \"include\",\n    })\n    .then(r => {\n\n      if (r.ok) {\n        return r.json();\n      }\n\n      throw new Error(\"Network error while deleting rating\");\n    })\n    .then(c => {\n\n      // The current weight may be lost because comes from DB and the UI can have a different value.\n      c.weight = criterion.weight;\n\n      Object.assign(criterion, c);\n      this.requestUpdate();\n      this.updateComplete.then(() => this.querySelector(`#criterion-ratings-reorderer-${e.detail.criterionId}`).requestUpdate());\n      this.letShareKnow();\n      this.dispatchEvent(new CustomEvent(\"refresh-total-weight\", { detail: { criteria: this.criteria } }));\n    })\n    .catch (error => console.error(error));\n  }\n\n  // SAK-47640 - Get the maximum and minimum possible grade of the criterion,\n  // multiplying the max-min rating points of the criterion by the criterion weight\n  getCriterionMaxPoints(criterionId) {\n    return this.getCriterionPoints(criterionId, Math.max);\n  }\n\n  getCriterionMinPoints(criterionId) {\n    return this.getCriterionPoints(criterionId, Math.min);\n  }\n\n  getCriterionPoints(criterionId, minOrMax) {\n\n    let totalPoints = 0;\n    const criterion = this.criteria.find(c => c.id == criterionId);\n\n    totalPoints += minOrMax(...criterion.ratings.map(rating => rating.points * (criterion.weight / 100)));\n\n    return parseFloat(totalPoints).toLocaleString(this.locale);\n  }\n\n  cloneCriterion(e) {\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const url = `/api/sites/${this.siteId}/rubrics/${this.rubricId}/criteria/${e.target.dataset.criterionId}/copy`;\n    fetch(url, {\n      credentials: \"include\",\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n    .then(r => {\n\n      if (r.ok) {\n        return r.json();\n      }\n      throw new Error(\"Server error while cloning criterion\");\n    })\n    .then(clone => this.createCriterionResponse(clone))\n    .catch(error => console.error(error));\n  }\n\n  createCriterionResponse(nc) {\n\n    this.criteria.push(nc);\n    this.criteriaMap.set(nc.id, nc);\n\n    // Add the criterion to the rubric\n    this.requestUpdate();\n    this.updateComplete.then(() => this.querySelector(\"sakai-reorderer\").requestUpdate());\n  }\n\n  criterionEdited(e) {\n\n    const criterion = this.criteriaMap.get(e.detail.id);\n    criterion.title = e.detail.title;\n    criterion.description = e.detail.description;\n    criterion.new = false;\n    this.requestUpdate();\n\n    const del = this.querySelector(`sakai-item-delete[criterion-id=\"${e.detail.id}\"]`);\n    del.criterion = criterion;\n    del.requestUpdate();\n    const edit = this.querySelector(`sakai-rubric-criterion-edit[id=\"criterion-edit-${e.detail.id}\"]`);\n    edit.criterion = criterion;\n    edit.requestUpdate();\n  }\n\n  saveWeights() {\n    this.dispatchEvent(new CustomEvent(\"save-weights\"));\n  }\n\n  createCriterion(e, empty = false) {\n\n    const url = `/api/sites/${this.siteId}/rubrics/${this.rubricId}/criteria/default${empty ? \"Empty\" : \"\"}`;\n    fetch(url, {\n      credentials: \"include\",\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n    .then(r => {\n\n      if (r.ok) {\n        return r.json();\n      }\n      throw new Error(\"Network error while getting default criterion\");\n    })\n    .then(nc => this.createCriterionResponse(nc))\n    .catch(error => console.error(error));\n  }\n\n  openEditWithKeyboard(e) {\n\n    if (e.keyCode == 32) {\n      this.cloneCriterion(e);\n    }\n  }\n\n  isRatingRemovable(criterion) {\n    return criterion.ratings.length > 1;\n  }\n\n  debounce(fn, delay) {\n\n    let timer = null;\n    return function (...args) {\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        fn.apply(this, args);\n      }, delay);\n    };\n  }\n\n  updated(changedProperties) {\n\n    super.updated(changedProperties);\n\n    if (changedProperties.has(\"criteria\")) {\n      this.criteriaMap = new Map(this.criteria.map(c => [ c.id, c ]));\n    }\n  }\n\n  _renderAddRatingButton(c, pos = 0) {\n\n    return html`\n      <button data-criterion-id=\"${c.id}\"\n          aria-label=\"${this.tr(\"add_rating\")} ${c.title}\"\n          title=\"${this.tr(\"add_rating\")} ${c.title}\"\n          @click=${this.addRating}\n          data-rating-pos=\"${pos}\">\n        <span class=\"fa fa-plus\"></span>\n      </button>\n    `;\n  }\n\n  render() {\n\n    return html`\n      <sakai-reorderer drop-class=\"criterion-row\" @reordered=${this._criteriaReordered}>\n        <div data-rubric-id=\"${this.rubricId}\" class=\"criterion style-scope sakai-rubric-criterion\">\n        ${repeat(this.criteria, c => c.id, c => html`\n          ${this.isCriterionGroup(c) ? html`\n            <div id=\"criterion_row_${c.id}\" data-criterion-id=\"${c.id}\" data-reorderable-id=\"${c.id}\" class=\"criterion-row criterion-group\">\n              <div class=\"criterion-detail criterion-title\">\n                <h4 class=\"criterion-title d-flex align-items-center\">\n                  <div>\n                    <span tabindex=\"0\"\n                        title=\"${this.tr(\"drag_order\")}\"\n                        data-criterion-id=\"${c.id}\"\n                        aria-label=\"${this.tr(\"drag_to_reorder_label\")}\"\n                        class=\"drag-handle reorder-icon si si-drag-handle fs-3\">\n                    </span>\n                  </div>\n                  <div class=\"ms-1\">${c.title}</div>\n                  <div>\n                    <sakai-rubric-criterion-edit\n                        id=\"criterion-edit-${c.id}\"\n                        @criterion-edited=${this.criterionEdited}\n                        site-id=\"${this.siteId}\"\n                        rubric-id=\"${this.rubricId}\"\n                        .criterion=${c}\n                        ?is-criterion-group=\"${true}\">\n                    </sakai-rubric-criterion-edit>\n                  </div>\n                </h4>\n                <p>${unsafeHTML(c.description)}</p>\n              </div>\n              <div class=\"criterion-actions\">\n                ${!this.isLocked ? html`\n                  <a tabindex=\"0\" role=\"button\" data-criterion-id=\"${c.id}\" title=\"${this.tr(\"copy\")} ${c.title}\" aria-label=\"${this.tr(\"copy\")} ${c.title}\" class=\"linkStyle clone fa fa-copy\" @click=\"${this.cloneCriterion}\" href=\"#\"></a>\n                  <sakai-item-delete criterion-id=\"${c.id}\" site-id=\"${this.siteId}\" .criterion=${c} rubric-id=\"${this.rubricId}\" @delete-item=${this.deleteCriterion}></sakai-item-delete>\n                ` : nothing }\n              </div>\n            </div>\n          ` : html`\n            <div id=\"criterion_row_${c.id}\" data-criterion-id=\"${c.id}\" data-reorderable-id=\"${c.id}\" class=\"criterion-row\">\n              <div class=\"criterion-detail\">\n                <h4 class=\"criterion-title d-flex align-items-center\">\n                  <div>\n                    <span tabindex=\"0\"\n                        title=\"${this.tr(\"drag_order\")}\"\n                        data-criterion-id=\"${c.id}\"\n                        aria-label=\"${this.tr(\"drag_to_reorder_label\")}\"\n                        class=\"drag-handle reorder-icon si si-drag-handle fs-3\">\n                    </span>\n                  </div>\n                  <div class=\"ms-1\">${c.title}</div>\n                  <div>\n                    <sakai-rubric-criterion-edit\n                        id=\"criterion-edit-${c.id}\"\n                        @criterion-edited=${this.criterionEdited}\n                        site-id=\"${this.siteId}\"\n                        rubric-id=\"${this.rubricId}\"\n                        .criterion=${c}>\n                    </sakai-rubric-criterion-edit>\n                  </div>\n                </h4>\n                <p>\n                  ${unsafeHTML(c.description)}\n                </p>\n                ${this.weighted ? html`\n                  <div class=\"weight-field\">\n                    ${!this.isLocked ? html`\n                      <div class=\"field-item form-group input-group-sm ${this.validWeight ? \"\" : \"weight-error\"}\">\n                        <label\n                          for=\"weight_input_${c.id}\"\n                          class=\"form-control-label\"\n                          title=\"${!this.validWeight ? tr(\"total_weight_wrong\") : \"\"}\"\n                        >\n                          <sr-lang key=\"weight\">Weight</sr-lang>\n                        </label>\n                        <input\n                          id=\"weight_input_${c.id}\"\n                          data-criterion-id=\"${c.id}\"\n                          type=\"text\"\n                          class=\"form-control\"\n                          placeholder=\"0.0\"\n                          @input=\"${this.debounce(this.emitWeightChanged, 500)}\"\n                          value=\"${c.weight.toLocaleString(this.locale)}\"\n                          title=\"${!this.validWeight ? tr(\"total_weight_wrong\") : \"\"}\"\n                        >\n                        <span class=\"form-control-label\"\n                          title=\"${!this.validWeight ? tr(\"total_weight_wrong\") : \"\"}\"\n                        >\n                          <sr-lang key=\"percent_sign\">%</sr-lang>\n                        </span>\n                      </div>\n                    ` : nothing }\n                    <div class=\"field-item\">\n                      <span>${this.tr(\"min_max_points\", [ this.getCriterionMinPoints(c.id), this.getCriterionMaxPoints(c.id) ])}</span>\n                    </div>\n                  </div>\n                ` : nothing }\n                ${!this.isLocked ? html`\n                  <div class=\"add-criterion-item\">\n                    ${this._renderAddRatingButton(c)}\n                  </div>\n                ` : nothing }\n              </div>\n              <div class=\"criterion-ratings\">\n                <sakai-reorderer id=\"criterion-ratings-reorderer-${c.id}\" class=\"rating-reorderer\" @reordered=${this._ratingsReordered} horizontal>\n                  <div id=\"cr-table-${c.id}\" class=\"cr-table\" data-criterion-id=\"${c.id}\">\n                  ${repeat(c.ratings, r => r.id, (r, i) => html`\n                    <div class=\"rating-item\"\n                        data-criterion-id=\"${c.id}\"\n                        data-rating-id=\"${r.id}\"\n                        data-reorderable-id=\"${r.id}\"\n                        id=\"rating_item_${r.id}\">\n                      <h5 class=\"criterion-item-title\">\n                        ${r.title}\n                        <sakai-rubric-criterion-rating-edit\n                          criterion-id=\"${c.id}\"\n                          @save-rating=${this.saveRating}\n                          @delete-rating=${this.deleteRating}\n                          minpoints=\"${c.pointrange ? c.pointrange.low : 0}\"\n                          maxpoints=\"${c.pointrange ? c.pointrange.high : 0}\"\n                          .rating=${r}\n                          ?removable=\"${ this.isRatingRemovable(c) }\"\n                          ?is-locked=\"${this.isLocked}\">\n                        </sakai-rubric-criterion-rating-edit>\n                      </h5>\n                      <div class=\"div-description\">\n                        <p>\n                        ${r.description}\n                        </p>\n                      </div>\n                      <span class=\"points\">\n                        ${this.weighted && r.points > 0 ? html`\n                          <b>\n                            (${parseFloat((r.points * (c.weight / 100)).toFixed(2)).toLocaleString(this.locale)})\n                          </b>\n                        ` : nothing }\n                        ${parseFloat(r.points).toLocaleString(this.locale)} <sr-lang key=\"points\">Points</sr-lang>\n                      </span>\n                      ${!this.isLocked ? html`\n                        <div class=\"add-criterion-item\">\n                          ${this._renderAddRatingButton(c, i + 1)}\n                        </div>\n                        <span tabindex=\"0\"\n                            data-criterion-id=\"${c.id}\"\n                            data-rating-id=\"${r.id}\"\n                            title=\"${this.tr(\"drag_order\")}\"\n                            aria-label=\"${this.tr(\"drag_to_reorder_label\")}\"\n                            aria-describedby=\"rubrics-reorder-info\"\n                            class=\"drag-handle reorder-icon sideways si si-drag-handle\">\n                        </span>\n                      ` : nothing }\n                    </div>\n                  `)}\n                  </div>\n                </sakai-reorderer>\n              </div>\n              ${!this.isLocked ? html`\n                <div class=\"criterion-actions\">\n                  <a tabindex=\"0\" role=\"button\" data-criterion-id=\"${c.id}\" title=\"${this.tr(\"copy\")} ${c.title}\" aria-label=\"${this.tr(\"copy\")} ${c.title}\" class=\"linkStyle clone fa fa-copy\" @keyup=\"${this.openEditWithKeyboard}\" @click=\"${this.cloneCriterion}\" href=\"#\"></a>\n                  <sakai-item-delete criterion-id=\"${c.id}\" site-id=\"${this.siteId}\" .criterion=${c} rubric-id=\"${this.rubricId}\" @delete-item=${this.deleteCriterion}></sakai-item-delete>\n                </div>\n              ` : nothing }\n            </div>\n          `}\n        `)}\n        </div>\n      </sakai-reorderer>\n      ${!this.isLocked ? html`\n        <div class=\"action-butons\">\n          ${this.weighted ? html`\n            <button class=\"btn-link save-weights\" @click=\"${this.saveWeights}\" ?disabled=\"${!this.validWeight && !this.isDraft}\">\n              <span class=\"add fa fa-save\"></span>\n              ${this._i18n.save_weights}\n            </button>\n          ` : nothing }\n          <button class=\"btn-link add-criterion\" @click=\"${this.createCriterion}\">\n            <span class=\"add fa fa-plus\"></span>\n            ${this._i18n.add_criterion}\n          </button>\n          <button class=\"btn-link add-empty-criterion\" @click=\"${event => this.createCriterion(event, true)}\">\n            <span class=\"add fa fa-plus\"></span>\n            ${this._i18n.add_criterion_group}\n          </button>\n        </div>\n        ${this.isDraft ? html`\n        <div class=\"sak-banner-warn margin-bottom\">${this._i18n.draft_info}</div>\n        ` : nothing }\n      ` : html`\n        <div class=\"sak-banner-warn margin-bottom\">${this._i18n.locked_warning}</div>\n      `}\n      <br>\n    `;\n  }\n}\n", "import { SakaiRubricCriteria } from \"./src/SakaiRubricCriteria.js\";\n\ncustomElements.define(\"sakai-rubric-criteria\", SakaiRubricCriteria);\n", "import { RubricsElement } from \"./RubricsElement.js\";\nimport { html } from \"lit\";\nimport { unsafeHTML } from \"lit/directives/unsafe-html.js\";\n\nexport class SakaiRubricCriteriaReadonly extends RubricsElement {\n\n  static properties = {\n\n    criteria: { type: Array },\n    weighted: Boolean,\n  };\n\n  render() {\n\n    return html`\n      <div class=\"criterion style-scope sakai-rubric-criterion-readonly\">\n        <div id=\"sort-criterion\">\n          ${this.criteria.map(c => html`\n            ${this.isCriterionGroup(c) ? html`\n              <div id=\"criterion_row_${c.id}\" class=\"criterion-row criterion-group\">\n                <div class=\"criterion-detail\">\n                  <h4 class=\"criterion-title\">${c.title}</h4>\n                  <p>${unsafeHTML(c.description)}</p>\n                </div>\n              </div>\n            ` : html`\n              <div id=\"criterion_row_${c.id}\" class=\"criterion-row\">\n                <div tabindex=\"0\" class=\"criterion-detail\">\n                  <h4 class=\"criterion-title\">${c.title}</h4>\n                  <p>${unsafeHTML(c.description)}</p>\n                  ${this.weighted ? html`\n                      <div class=\"criterion-weight\">\n                          <span>${this._i18n.weight}</span>\n                          <span>${c.weight.toLocaleString(this.locale)}</span>\n                          <span>${this._i18n.percent_sign}</span>\n                      </div>`\n                    : \"\"\n                  }\n                </div>\n                <div class=\"criterion-ratings\">\n                  <div class=\"cr-table\">\n                    <div class=\"cr-table-row\">\n                    ${c.ratings.map(r => html`\n                      <div tabindex=\"0\" title=\"${this._i18n.rating_title}: ${r.title}. ${this._i18n.rating_description}: ${r.description}. ${this._i18n.point_value}: ${r.points.toLocaleString(this.locale)}\" class=\"rating-item\" id=\"rating_item_${r.id}\">\n                        <h5 class=\"criterion-item-title\">${r.title}</h5>\n                        <p>${r.description}</p>\n                        <span class=\"points\">\n                          ${this.weighted && r.points > 0 ? html`\n                              <b>\n                                (${parseFloat((r.points * (c.weight / 100)).toFixed(2)).toLocaleString(this.locale)})\n                              </b>`\n                            : \"\"\n                          }\n                          ${r.points.toLocaleString(this.locale)}\n                          ${this._i18n.points}\n                        </span>\n                      </div>\n                    `)}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            `}\n          `)}\n        </div>\n      </div>\n    `;\n  }\n}\n", "import { SakaiRubricCriteriaReadonly } from \"./src/SakaiRubricCriteriaReadonly.js\";\n\ncustomElements.define(\"sakai-rubric-criteria-readonly\", SakaiRubricCriteriaReadonly);\n", "import { RubricsElement } from \"./RubricsElement.js\";\nimport { html, nothing } from \"lit\";\nimport { ifDefined } from \"lit/directives/if-defined.js\";\nimport \"../sakai-rubric-criteria.js\";\nimport \"../sakai-rubric-criteria-readonly.js\";\nimport \"../sakai-rubric-edit.js\";\nimport \"../sakai-item-delete.js\";\nimport \"../sakai-rubric-pdf.js\";\nimport { tr } from \"./SakaiRubricsLanguage.js\";\nimport { SharingChangeEvent } from \"./SharingChangeEvent.js\";\n\nexport class SakaiRubric extends RubricsElement {\n\n  static properties = {\n\n    rubric: { type: Object },\n    siteId: { attribute: \"site-id\", type: String },\n    enablePdfExport: { attribute: \"enable-pdf-export\", type: Boolean },\n\n    _shareIcon: { state: true },\n    _weightedIcon: { state: true },\n    _totalWeight: { state: true },\n    _validWeight: { state: true },\n    _maxPoints: { state: true },\n    _minPoints: { state: true },\n  };\n\n  constructor() {\n\n    super();\n\n    this.updateRubricOptions = {\n      method: \"PATCH\",\n      credentials: \"include\",\n      headers: { \"Content-Type\": \"application/json-patch+json\" },\n    };\n\n    this.enablePdfExport = false;\n  }\n\n  set rubric(value) {\n\n    const old = this._rubric;\n    this._rubric = value;\n    !this._rubric.criteria && (this._rubric.criteria = []);\n    this.handleRefreshTotalWeight();\n    this.handleDraftBtn();\n    this.handleWeightBtn();\n    this.handleShareBtn();\n    this.requestUpdate(\"rubric\", old);\n\n    // If this is a newly created rubric, show the edit modal when the update's complete\n    this.updateComplete.then(() => {\n\n      if (value.new) {\n        bootstrap.Collapse.getOrCreateInstance(this.querySelector(`#rubric-collapse-${value.id}`)).show();\n      }\n    });\n  }\n\n  get rubric() { return this._rubric; }\n\n  matches(search) {\n\n    const rubricTitle = this.querySelector(\".rubric-name\").textContent;\n    const rubricAuthor = this.querySelector(\".rubric-creator-name\").textContent;\n    const rubricSite = this.querySelector(\".rubric-site-title\").textContent;\n\n    return rubricAuthor.toLowerCase().includes(search) ||\n            rubricTitle.toLowerCase().includes(search) ||\n            rubricSite.toLowerCase().includes(search);\n  }\n\n  shouldUpdate() { return this.rubric; }\n\n  firstUpdated() {\n\n    const shared = this.tagName === \"SAKAI-RUBRIC-READONLY\" ? \"shared-\" : \"\";\n\n    const criteriaBlock = this.querySelector(`#rubric-collapse-${shared}${this.rubric.id}`);\n\n    criteriaBlock.addEventListener(\"show.bs.collapse\", e => {\n\n      e.stopPropagation();\n      this.querySelector(`#rubric-toggle-${shared}${this.rubric.id} span.fa`).classList.replace(\"fa-chevron-right\", \"fa-chevron-down\");\n    });\n\n    criteriaBlock.addEventListener(\"hide.bs.collapse\", e => {\n\n      e.stopPropagation();\n      this.querySelector(`#rubric-toggle-${shared}${this.rubric.id} span.fa`).classList.replace(\"fa-chevron-down\", \"fa-chevron-right\");\n    });\n  }\n\n  render() {\n\n    return html`\n      <div class=\"rubric-title\">\n        <div>\n          <button type=\"button\"\n              class=\"btn btn-icon btn-sm\"\n              id=\"rubric-toggle-${this.rubric.id}\"\n              data-bs-toggle=\"collapse\"\n              data-bs-target=\"#rubric-collapse-${this.rubric.id}\"\n              aria-controls=\"rubric-collapse-${this.rubric.id}\"\n              aria-expanded=\"false\"\n              title=\"${this.tr(\"toggle_details\")} ${this.rubric.title}\">\n            <span class=\"fa fa-chevron-right\"></span>\n          </button>\n          <span class=\"rubric-name\">${this.rubric.title}</span>\n          ${this.rubric.locked ? html`\n            ${this.rubric.weighted ? html`\n              <span\n                tabindex=\"0\"\n                role=\"tooltip\"\n                title=\"${this.tr(\"weighted_status\")}\"\n                aria-label=\"${this.tr(\"weighted_status\")}\"\n                class=\"fa fa-percent icon-spacer\">\n              </span>\n            ` : nothing }\n            <span\n              tabindex=\"0\"\n              role=\"tooltip\"\n              title=\"${this.rubric.title} ${this.tr(\"is_locked\")}\"\n              aria-label=\"${this.rubric.title} ${this.tr(\"is_locked\")}\"\n              class=\"locked fa fa-lock icon-spacer\">\n            </span>`\n            : \"\"\n          }\n          <sakai-rubric-edit\n            id=\"rubric-edit-${this.rubric.id}\"\n            @update-rubric-title=${this.updateRubricTitle}\n            @click=${el => el.stopPropagation()}\n            .rubric=${this.rubric}\n            class=\"icon-spacer\">\n          </sakai-rubric-edit>\n          ${this.rubric.draft ? html`\n            <span\n              tabindex=\"0\"\n              role=\"tooltip\"\n              title=\"${this.tr(\"draft_info\")}\"\n              aria-label=\"${this.tr(\"draft_info\")}\"\n              class=\"highlight bold icon-spacer\"\n            >\n              ${this.tr(\"draft_label\")}\n            </span>`\n            : \"\"\n          }\n        </div>\n\n        <div class=\"d-none d-sm-block rubric-site-title\">${this.rubric.siteTitle}</div>\n        <div class=\"d-none d-sm-block rubric-creator-name\">${this.rubric.creatorDisplayName}</div>\n        <div class=\"d-none d-sm-block\">${this.rubric.formattedModifiedDate}</div>\n\n        <div class=\"actions\">\n          ${!this.rubric.locked ? html`\n            <div class=\"action-container\">\n              <button type=\"button\"\n                  class=\"btn btn-sm ${(this.rubric.draft && this.rubric.weighted && !this._validWeight) ? \"disabled\" : \"\"} draft\"\n                  title=\"${this.draftLabel}\"\n                  aria-label=\"${this.draftLabel}\"\n                  @keyup=${this.openEditWithKeyboard}\n                  @click=${this.draftChange}>\n                <span class=\"fa ${this.draftIcon}\"></span>\n              </button>\n            </div>\n            <div class=\"action-container\">\n              <button type=\"button\"\n                  class=\"btn btn-sm weighted\"\n                  title=\"${this.weightLabel}\"\n                  aria-label=\"${this.weightLabel}\"\n                  @keyup=${this.openEditWithKeyboard}\n                  @click=${this.weightedChange}>\n                <span class=\"fa ${this._weightedIcon}\"></span>\n              </button>\n            </div>`\n            : \"\"\n          }\n          <div class=\"action-container\">\n            <button type=\"button\"\n                class=\"btn btn-sm share\"\n                title=\"${this.tr(this.shareTitleKey, [ this.rubric.title ])}\"\n                aria-label=\"${this.tr(this.shareTitleKey, [ this.rubric.title ])}\"\n                @keyup=${this.openEditWithKeyboard}\n                @click=${this.sharingChange}>\n              <span class=\"fa ${this._shareIcon}\"></span>\n            </button>\n          </div>\n          <div class=\"action-container\">\n            <button type=\"button\"\n                class=\"btn btn-sm clone\"\n                title=\"${this.tr(\"copy\")} ${this.rubric.title}\"\n                aria-label=\"${this.tr(\"copy\")} ${this.rubric.title}\"\n                @keyup=${this.openEditWithKeyboard}\n                @click=${this.cloneRubric}>\n              <span class=\"fa fa-copy\"></span>\n            </button>\n          </div>\n          ${!this.rubric.locked ? html`\n            <div class=\"action-container\">\n              <sakai-item-delete\n                .rubric=${this.rubric}\n                site-id=\"${this.siteId}\"\n                class=\"sakai-rubric\">\n              </sakai-item-delete>\n            </div>`\n            : \"\"\n          }\n          ${this.enablePdfExport ? html`\n            <div class=\"action-container\">\n              <sakai-rubric-pdf\n                site-id=\"${this.siteId}\"\n                rubric-title=\"${this.rubric.title}\"\n                rubric-id=\"${this.rubric.id}\">\n              </sakai-rubric-pdf>\n            </div>`\n            : \"\"\n          }\n        </div>\n      </div>\n\n      <div class=\"collapse\" id=\"rubric-collapse-${this.rubric.id}\">\n        <div class=\"rubric-details style-scope sakai-rubric\">\n          <sakai-rubric-criteria\n            rubric-id=\"${this.rubric.id}\"\n            site-id=\"${this.rubric.ownerId}\"\n            .criteria=\"${this.rubric.criteria}\"\n            @save-weights=\"${this.handleSaveWeights}\"\n            @weight-changed=${this.handleCriterionWeightChange}\n            @refresh-total-weight=${this.handleRefreshTotalWeight}\n            .weighted=${this.rubric.weighted}\n            total-weight=\"${this._totalWeight}\"\n            ?valid-weight=\"${this._validWeight}\"\n            max-points=\"${ifDefined(this._maxPoints)}\"\n            min-points=\"${ifDefined(this._minPoints)}\"\n            ?is-locked=\"${this.rubric.locked}\"\n            ?is-draft=\"${this.rubric.draft}\">\n          </sakai-rubric-criteria>\n        </div>\n      </div>\n    `;\n  }\n\n  cloneRubric(e) {\n\n    e.stopPropagation();\n    this.dispatchEvent(new CustomEvent(\"clone-rubric\", { detail: this.rubric, bubbles: true, composed: true }));\n  }\n\n  updateRubricTitle(e) {\n\n    this.updateRubricOptions.body = JSON.stringify([ { \"op\": \"replace\", \"path\": \"/title\", \"value\": e.detail } ]);\n    const url = `/api/sites/${this.rubric.ownerId}/rubrics/${this.rubric.id}`;\n    fetch(url, this.updateRubricOptions)\n    .then(r => {\n\n      if (r.ok) {\n        this.rubric.title = e.detail;\n        this.requestUpdate();\n        this.updateItemDelete();\n        this.dispatchEvent(new SharingChangeEvent());\n      } else {\n        throw new Error(\"Network error while updating rubric title\");\n      }\n    })\n    .catch (error => console.error(error));\n  }\n\n  handleSaveWeights() {\n\n    const saveWeightsBtn = document.querySelector(`[rubric-id='${this.rubric.id}'] .save-weights`);\n    const saveSuccessLbl = document.querySelector(`[rubric-id='${this.rubric.id}'] .sak-banner-success`);\n\n    if (saveWeightsBtn) saveWeightsBtn.setAttribute(\"disabled\", true);\n\n    this.rubric.criteria.forEach(cr => {\n\n      this.updateRubricOptions.body = JSON.stringify([ { \"op\": \"replace\", \"path\": \"/weight\", \"value\": cr.weight } ]);\n      const url = `/api/sites/${this.rubric.ownerId}/rubrics/${this.rubric.id}/criteria/${cr.id}`;\n      fetch(url, this.updateRubricOptions)\n      .then(r => {\n\n        if (r.ok) {\n\n          if (saveSuccessLbl) {\n            saveSuccessLbl.classList.remove(\"d-none\");\n            setTimeout(() => {\n              saveSuccessLbl.classList.add(\"d-none\");\n            }, 5000);\n          }\n\n          setTimeout(() => {\n            if (saveWeightsBtn) saveWeightsBtn.removeAttribute(\"disabled\");\n          }, 1000);\n\n          this.requestUpdate();\n          this.dispatchEvent(new SharingChangeEvent());\n        } else {\n          throw new Error(\"Network error while setting criterion weight\");\n        }\n      })\n      .catch (error => console.error(error));\n    });\n  }\n\n  handleCriterionWeightChange(e) {\n\n    const payload = e.detail;\n\n    this.rubric.criteria = payload.criteria;\n    const criterionModified = this.rubric.criteria.find(el => el.id === payload.criterionId);\n    const oldValue = criterionModified.weight;\n\n    criterionModified.weight = payload.value;\n    if (oldValue === payload.value) {\n      return;\n    }\n\n    const total = this.rubric.criteria.reduce((acc, el) => acc + el.weight, 0);\n\n    this._validWeight = total == 100;\n    this._totalWeight = total.toLocaleString(this.locale);\n    this._maxPoints = this.getMaxPoints(this.rubric.criteria);\n    this._minPoints = this.getMinPoints(this.rubric.criteria);\n    this.requestUpdate();\n    this.handleDraftBtn();\n  }\n\n  handleRefreshTotalWeight(e) {\n\n    if (e && e.detail.criteria) {\n      this.rubric.criteria = e.detail.criteria;\n    }\n    this._totalWeight = 0;\n    this.rubric.criteria.forEach(cr => {\n      this._totalWeight = this._totalWeight + cr.weight;\n    });\n    this._validWeight = this._totalWeight == 100;\n    this._maxPoints = this.getMaxPoints(this.rubric.criteria);\n    this._minPoints = this.getMinPoints(this.rubric.criteria);\n  }\n\n  draftChange(e) {\n\n    e.stopPropagation();\n    e.preventDefault();\n    // Draft mode can't be turned off if the total weight doesn't match 100%,\n    // this way (+css) also prevents the rubric to be toggled when pressing the disabled button.\n    if (this.rubric.draft && this.rubric.weighted && !this._validWeight) {\n      return;\n    }\n    this.rubric.draft = !this.rubric.draft;\n\n    this.updateRubricOptions.body = JSON.stringify([ { \"op\": \"replace\", \"path\": \"/draft\", \"value\": this.rubric.draft } ]);\n    const url = `/api/sites/${this.rubric.ownerId}/rubrics/${this.rubric.id}`;\n    fetch(url, this.updateRubricOptions)\n    .then(r => {\n\n      if (r.ok) {\n        this.handleSaveWeights();\n        this.handleDraftBtn();\n        this.requestUpdate();\n      }\n    });\n  }\n\n  weightedChange(e) {\n\n    e.stopPropagation();\n    e.preventDefault();\n    this.rubric.weighted = !this.rubric.weighted;\n    if (this.rubric.weighted) {\n      this.rubric.criteria.forEach(cr => cr.weight = 0);\n      //Try to get first criterion, that is not a criterion group\n      const firstCriterion = this.rubric.criteria.find(criteria => criteria.ratings?.length > 0);\n      if (firstCriterion) {\n        //Set weight of first criterion to 100 (%)\n        firstCriterion.weight = 100;\n        this.handleSaveWeights(e);\n      }\n      this.handleRefreshTotalWeight();\n    }\n\n    this.updateRubricOptions.body = JSON.stringify([ { \"op\": \"replace\", \"path\": \"/weighted\", \"value\": this.rubric.weighted } ]);\n    const url = `/api/sites/${this.rubric.ownerId}/rubrics/${this.rubric.id}`;\n    fetch(url, this.updateRubricOptions)\n    .then(r => {\n\n      if (r.ok) {\n        this.handleWeightBtn();\n        this.requestUpdate();\n      }\n    });\n  }\n\n  sharingChange(e) {\n\n    e.stopPropagation();\n\n    this.rubric.shared = !this.rubric.shared;\n\n    this.updateRubricOptions.body = JSON.stringify([ { \"op\": \"replace\", \"path\": \"/shared\", \"value\": this.rubric.shared } ]);\n    const url = `/api/sites/${this.rubric.ownerId}/rubrics/${this.rubric.id}`;\n    fetch(url, this.updateRubricOptions)\n    .then(r => {\n\n      if (r.ok) {\n        this.dispatchEvent(new SharingChangeEvent());\n        this.handleShareBtn();\n      } else {\n        throw new Error(\"Network error while updating rubric\");\n      }\n    })\n    .catch (error => console.error(error));\n  }\n\n  handleDraftBtn() {\n\n    if (this.rubric.draft) {\n      this.draftIcon = \"fa-eye-slash highlight\";\n      if (this.rubric.weighted) {\n        if (!this._validWeight) {\n          this.draftLabel = tr(\"draft_invalid_weight_publish\") + tr(\"total_weight_wrong\");\n        } else {\n          this.draftLabel = tr(\"draft_turn_off\") + tr(\"draft_save_weights\");\n        }\n      } else {\n        this.draftLabel = tr(\"draft_turn_off\");\n      }\n    } else {\n      this.draftIcon = \"fa-eye\";\n      if (this.rubric.weighted) {\n        this.draftLabel = tr(\"draft_turn_on\") + tr(\"draft_save_weights\");\n      } else {\n        this.draftLabel = tr(\"draft_turn_on\");\n      }\n    }\n  }\n\n  handleWeightBtn() {\n\n    if (this.rubric.weighted) {\n      this._weightedIcon = \"fa-percent\";\n      this.weightLabel = tr(\"weighted_label\");\n    } else {\n      this._weightedIcon = \"fa-hashtag\";\n      this.weightLabel = tr(\"standard_label\");\n    }\n\n    this.dispatchEvent(new SharingChangeEvent());\n  }\n\n  handleShareBtn() {\n\n    if (this.rubric.shared) {\n      this.shareTitleKey = \"revoke\";\n      this._shareIcon = \"fa-users\";\n    } else {\n      this.shareTitleKey = \"share\";\n      this._shareIcon = \"fa-user\";\n    }\n    this.shareValues = this.rubric.title;\n  }\n\n  updateItemDelete() {\n\n    const sakaiItemDelete = this.querySelector(\"sakai-item-delete\");\n    if (sakaiItemDelete) {\n      sakaiItemDelete.requestUpdate(\"item\", this.rubric);\n      sakaiItemDelete.requestUpdate(\"rubric\", this.rubric);\n    }\n  }\n\n  openEditWithKeyboard(e) {\n\n    const spaceBarKeyCode = (e.keyCode == 32);\n\n    if (spaceBarKeyCode && e.target.classList.contains(\"weighted\")) {\n      this.weightedChange(e);\n    }\n\n    if (spaceBarKeyCode && e.target.classList.contains(\"share\")) {\n      this.sharingChange(e);\n    }\n\n    if (spaceBarKeyCode && e.target.classList.contains(\"clone\")) {\n      this.cloneRubric(e);\n    }\n\n    if (spaceBarKeyCode && e.target.classList.contains(\"draft\")) {\n      this.draftChange(e);\n    }\n  }\n\n  // SAK-47640 - Get the maximum and minimum possible grade of the whole rubric,\n  // multiplying the max-min rating points of each criterion by the criterion weight, and adding them up\n  getMaxPoints(criterions) {\n    return this.getPoints(criterions, Math.max);\n  }\n\n  getMinPoints(criterions) {\n    return this.getPoints(criterions, Math.min);\n  }\n\n  getPoints(criterions, minOrMax) {\n\n    let totalPoints = 0;\n\n    criterions\n    .filter(criterion => criterion.ratings.length > 0)\n    .forEach(criterion => {\n      totalPoints += minOrMax(...criterion.ratings.map(rating => {\n        return rating.points * (criterion.weight / 100);\n      }));\n    });\n    return parseFloat(totalPoints).toLocaleString(this.locale);\n  }\n}\n", "import { SakaiRubric } from \"./src/SakaiRubric.js\";\n\ncustomElements.define(\"sakai-rubric\", SakaiRubric);\n", "import { RubricsElement } from \"./RubricsElement.js\";\nimport { html } from \"lit\";\nimport { repeat } from \"lit-html/directives/repeat.js\";\nimport \"../sakai-rubric.js\";\nimport { SharingChangeEvent } from \"./SharingChangeEvent.js\";\n\nconst rubricName = \"name\";\nconst rubricTitle = \"title\";\nconst rubricCreator = \"creator\";\nconst rubricModified = \"modified\";\n\nexport class SakaiRubricsList extends RubricsElement {\n\n  static properties = {\n\n    siteId: { attribute: \"site-id\", type: String },\n    enablePdfExport: { attribute: \"enable-pdf-export\", type: Boolean },\n\n    _rubrics: { state: true },\n  };\n\n  constructor() {\n\n    super();\n\n    this.enablePdfExport = false;\n  }\n\n  set siteId(value) {\n\n    this._siteId = value;\n    this.getRubrics();\n  }\n\n  get siteId() { return this._siteId; }\n\n  search(search) {\n\n    this.querySelectorAll(\"sakai-rubric, sakai-rubric-readonly\").forEach(rubric => {\n\n      rubric.classList.remove(\"d-none\");\n      rubric.classList.toggle(\"d-none\", !rubric.matches(search));\n    });\n  }\n\n  shouldUpdate() {\n    return this._rubrics && super.shouldUpdate();\n  }\n\n  render() {\n\n    return html`\n      <div role=\"presentation\">\n        <div role=\"tablist\">\n        ${repeat(this._rubrics, r => r.id, r => html`\n          <sakai-rubric @clone-rubric=${this.cloneRubric}\n              site-id=\"${this.siteId}\"\n              @delete-item=${this.deleteRubric}\n              .rubric=${r}\n              ?enable-pdf-export=${this.enablePdfExport}>\n          </sakai-rubric>\n        `)}\n        </div>\n      </div>\n      <br>\n      <div class=\"act\">\n        <button type=\"button\" class=\"active add-rubric\" @click=${this.createNewRubric}>\n          <span class=\"add fa fa-plus\"></span>\n          ${this._i18n.add_rubric}\n        </button>\n      </div>\n    `;\n  }\n\n  refresh() {\n    this.getRubrics();\n  }\n\n  getRubrics() {\n\n    const url = `/api/sites/${this.siteId}/rubrics`;\n    fetch(url, {\n      credentials: \"include\",\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n    .then(r => {\n\n      if (r.ok) {\n        return r.json();\n      }\n      throw new Error(`Network error while loading rubrics at ${url}`);\n    })\n    .then(rubrics => this._rubrics = rubrics)\n    .catch (error => console.error(error));\n  }\n\n  createRubricResponse(nr) {\n\n    nr.new = true;\n    nr.expanded = true;\n\n    // Make sure criterions are set, otherwise lit-html borks in sakai-rubric-criterion.js\n    if (!nr.criterions) {\n      nr.criterions = [];\n    }\n\n    this._rubrics.push(nr);\n\n    this.requestUpdate();\n  }\n\n  deleteRubric(e) {\n\n    e.stopPropagation();\n    this._rubrics.splice(this._rubrics.map(r => r.id).indexOf(e.detail.id), 1);\n\n    const tmp = this._rubrics;\n    this._rubrics = [];\n    this._rubrics = tmp;\n\n    this.dispatchEvent(new SharingChangeEvent());\n\n    this.requestUpdate();\n  }\n\n  cloneRubric(e) {\n\n    const url = `/api/sites/${this.siteId}/rubrics/${e.detail.id}/copyToSite`;\n    fetch(url, {\n      credentials: \"include\",\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n    .then(r => {\n\n      if (r.ok) {\n        return r.json();\n      }\n      throw new Error(\"Network error while copying rubric\");\n    })\n    .then(rubric => this.createRubricResponse(rubric))\n    .catch (error => console.error(error));\n  }\n\n  createNewRubric() {\n\n    const url = `/api/sites/${this.siteId}/rubrics/default`;\n    fetch(url, {\n      credentials: \"include\",\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n    .then(r => {\n\n      if (r.ok) {\n        return r.json();\n      }\n      throw new Error(`Network error while creating rubric at ${url}`);\n    })\n    .then(rubric => this.createRubricResponse(rubric))\n    .catch (error => console.error(error));\n  }\n\n  sortRubrics(rubricType, ascending) {\n\n    switch (rubricType) {\n      case rubricName:\n        this._rubrics.sort((a, b) => ascending ? a.title.localeCompare(b.title) : b.title.localeCompare(a.title));\n        break;\n      case rubricTitle:\n        this._rubrics.sort((a, b) => ascending ? a.siteTitle.localeCompare(b.siteTitle) : b.siteTitle.localeCompare(a.siteTitle));\n        break;\n      case rubricCreator:\n        this._rubrics.sort((a, b) => ascending ? a.creatorDisplayName.localeCompare(b.creatorDisplayName) : b.creatorDisplayName.localeCompare(a.creatorDisplayName));\n        break;\n      case rubricModified:\n        this._rubrics.sort((a, b) => ascending ? a.modified - b.modified : b.modified - a.modified);\n        break;\n    }\n    this.requestUpdate(\"_rubrics\");\n  }\n}\n", "import { SakaiRubricsList } from \"./src/SakaiRubricsList.js\";\n\ncustomElements.define(\"sakai-rubrics-list\", SakaiRubricsList);\n", "import { SakaiRubric } from \"./SakaiRubric.js\";\nimport { html } from \"lit\";\nimport \"../sakai-rubric-criteria-readonly.js\";\nimport \"../sakai-rubric-pdf.js\";\n\nexport class SakaiRubricReadonly extends SakaiRubric {\n\n  static properties = {\n\n    rubric: { type: Object },\n    enablePdfExport: { attribute: \"enable-pdf-export\", type: Boolean },\n  };\n\n  constructor() {\n\n    super();\n\n    this.enablePdfExport = false;\n  }\n\n  shouldUpdate() { return this.rubric; }\n\n  render() {\n\n    return html`\n      <div class=\"rubric-title\">\n        <div>\n          <button class=\"btn btn-icon\"\n              id=\"rubric-toggle-shared-${this.rubric.id}\"\n              data-bs-toggle=\"collapse\"\n              data-bs-target=\"#rubric-collapse-shared-${this.rubric.id}\"\n              aria-controls=\"rubric-collapse-shared-${this.rubric.id}\"\n              aria-expanded=\"false\"\n              title=\"${this._i18n.toggle_details} ${this.rubric.title}\">\n            <span class=\"fa fa-chevron-right\"></span>\n          </button>\n          <span class=\"rubric-name\">${this.rubric.title}</span>\n          ${this.rubric.draft ? html`\n            <span\n              tabindex=\"0\"\n              role=\"tooltip\"\n              title=\"${this.tr(\"draft_info\")}\"\n              aria-label=\"${this.tr(\"draft_info\")}\"\n              class=\"highlight bold icon-spacer\"\n            >\n              ${this.tr(\"draft_label\")}\n            </span>`\n            : \"\"\n          }\n        </div>\n\n        <div class=\"d-none d-sm-block rubric-site-title\">${this.rubric.siteTitle}</div>\n        <div class=\"d-none d-sm-block rubric-creator-name\">${this.rubric.creatorDisplayName}</div>\n        <div class=\"d-none d-sm-block\">${this.rubric.formattedModifiedDate}</div>\n\n        <div class=\"actions\">\n          <div class=\"action-container\">\n            <span class=\"d-none d-sm-none d-md-block visually-hidden\">${this._i18n.copy}</span>\n            <span role=\"button\" title=\"${this._i18n.copy_to_site.replace(\"{}\", this.rubric.title)}\" tabindex=\"0\" class=\"clone fa fa-copy\" @click=\"${this.copyToSite}\"></span>\n          </div>\n          ${this.enablePdfExport ? html`\n            <div class=\"action-container\">\n              <sakai-rubric-pdf\n                  site-id=\"${this.siteId}\"\n                  rubric-title=\"${this.rubric.title}\"\n                  rubric-id=\"${this.rubric.id}\">\n              </sakai-rubric-pdf>\n            </div>\n          ` : \"\"}\n        </div>\n      </div>\n\n      <div class=\"collapse\" id=\"rubric-collapse-shared-${this.rubric.id}\">\n        <div class=\"rubric-details style-scope sakai-rubric\">\n          <sakai-rubric-criteria-readonly .criteria=\"${this.rubric.criteria}\" .weighted=${this.rubric.weighted}></sakai-rubric-criteria-readonly>\n        </div>\n      </div>\n    `;\n  }\n\n  copyToSite(e) {\n\n    e.stopPropagation();\n    this.dispatchEvent(new CustomEvent(\"copy-to-site\", { detail: this.rubric.id }));\n  }\n}\n", "import { SakaiRubricReadonly } from \"./src/SakaiRubricReadonly.js\";\n\ncustomElements.define(\"sakai-rubric-readonly\", SakaiRubricReadonly);\n", "export class SakaiRubricsHelpers {\n\n  static handleErrors(response) {\n\n    if (!response.ok) {\n      console.error(`Error : ${response.statusText || response.status}`);\n      throw Error((response.statusText || response.status));\n    }\n    return response;\n  }\n\n  static get(baseUrl, extraOptions) {\n\n    let url = baseUrl;\n    if (extraOptions.params) {\n      const usp = new URLSearchParams();\n      Object.entries(extraOptions.params).forEach(([ k, v ]) => usp.append(k, v));\n      url += `?${usp.toString()}`;\n    }\n\n    const options = {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\",\n      }\n    };\n\n    Object.assign(options.headers, extraOptions.extraHeaders);\n\n    return fetch(url, options).then(SakaiRubricsHelpers.handleErrors).then(response => response.json());\n  }\n\n  static post(url, extraOptions) {\n\n    const body\n      = extraOptions.body ? Object.entries(extraOptions.body).reduce((acc, [ k, v ]) => acc.append(k, v), new FormData())\n        : \"{}\";\n\n    const options = {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body,\n    };\n\n    Object.assign(options.headers, extraOptions.extraHeaders);\n\n    return fetch(url, options).then(SakaiRubricsHelpers.handleErrors).then(response => response.json());\n  }\n}\n", "import { html } from \"lit\";\nimport \"../sakai-rubric-readonly.js\";\nimport { SakaiRubricsHelpers } from \"./SakaiRubricsHelpers.js\";\nimport { SakaiRubricsList } from \"./SakaiRubricsList.js\";\n\nconst rubricName = \"name\";\nconst rubricTitle = \"title\";\nconst rubricCreator = \"creator\";\nconst rubricModified = \"modified\";\n\nexport class SakaiRubricsSharedList extends SakaiRubricsList {\n\n  static properties = {\n\n    siteId: { attribute: \"site-id\", type: String },\n    enablePdfExport: { attribute: \"enable-pdf-export\", type: Boolean },\n\n    _rubrics: { state: true },\n  };\n\n  constructor() {\n\n    super();\n\n    this.getSharedRubrics();\n  }\n\n  shouldUpdate() {\n    return this._rubrics;\n  }\n\n  render() {\n\n    return html`\n      <div role=\"tablist\">\n      ${this._rubrics.map(r => html`\n        <sakai-rubric-readonly .rubric=${r} @copy-to-site=${this.copyToSite} ?enablePdfExport=${this.enablePdfExport}></sakai-rubric-readonly>\n      `)}\n      </div>\n    `;\n  }\n\n  refresh() {\n    this.getSharedRubrics();\n  }\n\n  getSharedRubrics() {\n\n    const url = \"/api/rubrics/shared\";\n    fetch(url, { credentials: \"include\" })\n    .then(r => {\n\n      if (r.ok) {\n        return r.json();\n      }\n      throw new Error(\"Network error while getting shared rubrics\");\n    })\n    .then(rubrics => this._rubrics = rubrics)\n    .catch (error => console.error(error));\n  }\n\n  copyToSite(e) {\n\n    SakaiRubricsHelpers.get(`/api/sites/${this.siteId}/rubrics/${e.detail}/copyToSite`, {})\n      .then(() => this.dispatchEvent(new CustomEvent(\"copy-share-site\")));\n  }\n\n  sortRubrics(rubricType, ascending) {\n\n    switch (rubricType) {\n      case rubricName:\n        this._rubrics.sort((a, b) => ascending ? a.title.localeCompare(b.title) : b.title.localeCompare(a.title));\n        break;\n      case rubricTitle:\n        this._rubrics.sort((a, b) => ascending ? a.siteTitle.localeCompare(b.siteTitle) : b.siteTitle.localeCompare(a.siteTitle));\n        break;\n      case rubricCreator:\n        this._rubrics.sort((a, b) => ascending ? a.creatorDisplayName.localeCompare(b.creatorDisplayName) : b.creatorDisplayName.localeCompare(a.creatorDisplayName));\n        break;\n      case rubricModified:\n        this._rubrics.sort((a, b) => ascending ? a.modified - b.modified : b.modified - a.modified);\n    }\n    this.requestUpdate(\"_rubrics\");\n  }\n}\n", "import { SakaiRubricsSharedList } from \"./src/SakaiRubricsSharedList.js\";\n\ncustomElements.define(\"sakai-rubrics-shared-list\", SakaiRubricsSharedList);\n", "import { RubricsElement } from \"./RubricsElement.js\";\nimport { html } from \"lit\";\nimport { unsafeHTML } from \"lit/directives/unsafe-html.js\";\nimport \"../sakai-rubrics-list.js\";\nimport \"../sakai-rubrics-shared-list.js\";\n\nexport class SakaiRubricsManager extends RubricsElement {\n\n  static properties = {\n\n    siteId: { attribute: \"site-id\", type: String },\n    enablePdfExport: { attribute: \"enable-pdf-export\", type: Boolean },\n  };\n\n  constructor() {\n\n    super();\n\n    this.siteRubricsExpanded = \"true\";\n    this.sharedRubricsExpanded = \"false\";\n    this.enablePdfExport = false;\n  }\n\n  firstUpdated() {\n\n    const siteRubricsBlock = this.querySelector(\"#site_rubrics\");\n\n    siteRubricsBlock.addEventListener(\"show.bs.collapse\", () => {\n      this.querySelector(\"#site-rubrics-toggle span.fa\").classList.replace(\"fa-chevron-right\", \"fa-chevron-down\");\n    });\n\n    siteRubricsBlock.addEventListener(\"hide.bs.collapse\", () => {\n      this.querySelector(\"#site-rubrics-toggle span.fa\").classList.replace(\"fa-chevron-down\", \"fa-chevron-right\");\n    });\n\n    const sharedRubricsBlock = this.querySelector(\"#shared_rubrics\");\n\n    sharedRubricsBlock.addEventListener(\"show.bs.collapse\", () => {\n      this.querySelector(\"#shared-rubrics-toggle span.fa\").classList.replace(\"fa-chevron-right\", \"fa-chevron-down\");\n    });\n\n    sharedRubricsBlock.addEventListener(\"hide.bs.collapse\", () => {\n      this.querySelector(\"#shared-rubrics-toggle span.fa\").classList.replace(\"fa-chevron-down\", \"fa-chevron-right\");\n    });\n  }\n\n  render() {\n\n    return html`\n\n      <h1>${this.tr(\"manage_rubrics\")}</h1>\n\n      <div class=\"sak-banner-info\">${this.tr(\"locked_message\")}</div>\n\n      <div id=\"rubrics-reorder-info\" class=\"sak-banner-info\">${unsafeHTML(this.tr(\"drag_to_reorder_info\"))}</div>\n\n      <div class=\"row\">\n        <div class=\"col-md-4 form-group\">\n          <label class=\"label-rubrics\" for=\"rubrics-search-bar\">${this.tr(\"search_rubrics\")}</label>\n          <input type=\"text\" id=\"rubrics-search-bar\" name=\"rubrics-search-bar\" class=\"form-control\" @keyup=${this.filterRubrics}>\n        </div>\n      </div>\n\n      <div role=\"tablist\">\n        <div class=\"d-flex align-items-center\">\n          <button class=\"btn btn-icon btn-xs me-1\"\n              id=\"site-rubrics-toggle\"\n              data-bs-toggle=\"collapse\"\n              data-bs-target=\"#site_rubrics\"\n              aria-expanded=\"true\"\n              title=\"${this.tr(\"toggle_site_rubrics\")}\"\n              aria-label=\"${this.tr(\"toggle_site_rubrics\")}\"\n              aria-controls=\"site_rubrics\">\n            <span class=\"collpase-icon fa fa-chevron-down\"></span>\n          </button>\n          <span class=\"fw-bold\">${this.tr(\"site_rubrics\")}</span>\n        </div>\n\n        <div class=\"collapse show\" id=\"site_rubrics\">\n          <div class=\"rubric-title-sorting\">\n            <div>\n              <a href=\"javascript:void(0)\"\n                  @click=${this.sortRubrics}\n                  data-key=\"site-name\">\n                ${this.tr(\"site_name\")}\n                <span class=\"collpase-icon fa fa-chevron-up site-name sort-element-site\"></span>\n              </a>\n            </div>\n            <div>\n              <a href=\"javascript:void(0)\"\n                  @click=${this.sortRubrics}\n                  data-key=\"site-title\">\n                ${this.tr(\"site_title\")}\n                <span class=\"collpase-icon fa fa-chevron-up site-title sort-element-site\"></span>\n              </a>\n            </div>\n            <div>\n              <a href=\"javascript:void(0)\"\n                  @click=${this.sortRubrics}\n                  data-key=\"site-creator\">\n                ${this.tr(\"creator_name\")}\n                <span class=\"collpase-icon fa fa-chevron-up site-creator sort-element-site\"></span>\n              </a>\n            </div>\n            <div>\n              <a href=\"javascript:void(0)\"\n                  @click=${this.sortRubrics}\n                  data-key=\"site-modified\">\n                ${this.tr(\"modified\")}\n                <span class=\"collpase-icon fa fa-chevron-up site-modified sort-element-site\"></span>\n              </a>\n            </div>\n            <div class=\"actions\">${this.tr(\"actions\")}</div>\n          </div>\n          <br>\n          <sakai-rubrics-list id=\"sakai-rubrics\" site-id=\"${this.siteId}\" @sharing-change=\"${this.handleSharingChange}\" @copy-share-site=\"${this.copyShareSite}\" ?enable-pdf-export=${this.enablePdfExport}></sakai-rubrics-list>\n        </div>\n      \n        <hr>\n        <h3>${this.tr(\"public_rubrics_title\")}</h3>\n        <p>${this.tr(\"public_rubrics_info\")}</p>\n\n        <div class=\"d-flex align-items-center\">\n          <button class=\"btn btn-icon btn-xs me-1\"\n              id=\"shared-rubrics-toggle\"\n              data-bs-toggle=\"collapse\"\n              data-bs-target=\"#shared_rubrics\"\n              aria-expanded=\"false\"\n              title=\"${this.tr(\"toggle_shared_rubrics\")}\"\n              aria-label=\"${this.tr(\"toggle_shared_rubrics\")}\"\n              aria-controls=\"shared_rubrics\">\n            <span class=\"collpase-icon fa fa-chevron-right\"></span>\n          </button>\n          <span class=\"fw-bold\">${this.tr(\"shared_rubrics\")}</span>\n        </div>\n\n        <div class=\"collapse\" id=\"shared_rubrics\">\n          <div id=\"sharedlist\">\n            <div class=\"rubric-title-sorting\">\n              <div>\n                <a href=\"javascript:void(0)\"\n                    @click=${this.sortRubrics}\n                    data-key=\"shared-name\">\n                  ${this.tr(\"site_name\")}\n                  <span class=\"collpase-icon fa fa-chevron-up shared-name sort-element-shared\"></span>\n                </a>\n              </div>\n              <div>\n                <a href=\"javascript:void(0)\"\n                    @click=${this.sortRubrics}\n                    data-key=\"shared-title\">\n                  ${this.tr(\"site_title\")}\n                  <span class=\"collpase-icon fa shared-title sort-element-shared\"></span>\n                </a>\n              </div>\n              <div>\n                <a href=\"javascript:void(0)\"\n                    @click=${this.sortRubrics}\n                    data-key=\"shared-creator\">\n                  ${this.tr(\"creator_name\")}\n                  <span class=\"collpase-icon fa shared-creator sort-element-shared\"></span>\n                </a>\n              </div>\n              <div>\n                <a href=\"javascript:void(0)\"\n                    @click=${this.sortRubrics}\n                    data-key=\"shared-modified\">\n                  ${this.tr(\"modified\")}\n                  <span class=\"collpase-icon fa shared-modified sort-element-shared\"></span>\n                </a>\n              </div>\n              <div class=\"actions\">${this.tr(\"actions\")}</div>\n            </div>\n            <br>\n            <sakai-rubrics-shared-list id=\"sakai-rubrics-shared-list\" site-id=\"${this.siteId}\" @copy-share-site=\"${this.copyShareSite}\" ?enable-pdf-export=${this.enablePdfExport}></sakai-rubrics-shared-list>\n          </div>\n          <br>\n        </div>\n      </div>\n    `;\n  }\n\n  handleSharingChange() {\n    document.getElementById(\"sakai-rubrics-shared-list\").refresh();\n  }\n\n  copyShareSite() {\n    this.querySelector(\"sakai-rubrics-list\").refresh();\n  }\n\n  filterRubrics(e) {\n\n    this.querySelectorAll(\"sakai-rubrics-list, sakai-rubrics-shared-list\").forEach(rubricList => {\n      rubricList.search(e.target.value.toLowerCase());\n    });\n  }\n\n  sortRubrics(event) {\n\n    const sortInput = event.currentTarget.dataset.key;\n\n    if (!sortInput) {\n      return;\n    }\n\n    const [ rubricClass, rubricType ] = sortInput.split(\"-\");\n\n    const arrowUpIcon = \"fa-chevron-up\";\n    const arrowDownIcon = \"fa-chevron-down\";\n    const selector = `.sort-element-${rubricClass}`;\n    let ascending = event.currentTarget.querySelector(selector).classList.contains(arrowUpIcon);\n    this.querySelectorAll(selector).forEach(item => {\n\n      item.classList.remove(arrowDownIcon);\n      item.classList.remove(arrowUpIcon);\n    });\n    event.currentTarget.querySelector(selector).classList.add(ascending ? arrowDownIcon : arrowUpIcon);\n    ascending = !ascending;\n\n    const list = this.querySelector(rubricClass === \"site\" ? \"sakai-rubrics-list\" : \"sakai-rubrics-shared-list\");\n    list.sortRubrics(rubricType, ascending);\n  }\n}\n", "import { SakaiRubricsManager } from \"./src/SakaiRubricsManager.js\";\n\ncustomElements.define(\"sakai-rubrics-manager\", SakaiRubricsManager);\n"],
  "mappings": "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",
  "names": ["SakaiRubricEdit", "RubricsElement", "value", "old", "modal", "ke", "e", "title", "SakaiRubricEdit", "SakaiItemDelete", "RubricsElement", "newValue", "ke", "e", "url", "r", "error", "SakaiItemDelete", "SharingChangeEvent", "SakaiRubricCriterionEdit", "RubricsElement", "value", "old", "modal", "changedProperties", "ke", "to", "e", "title", "description", "body", "url", "r", "criterion", "originalEditor", "SharingChangeEvent", "error", "SakaiRubricCriterionEdit", "SakaiRubricCriterionRatingEdit", "RubricsElement", "value", "old", "modal", "ke", "to", "D", "e", "points", "SakaiRubricCriterionRatingEdit", "tr", "key", "values", "SakaiReorderer", "h", "e", "afterElement", "total", "draggingIndex", "id", "afterIndex", "reorderable", "reorderableId", "index", "changed", "container", "coord", "closest", "child", "box", "offset", "n", "dragHandle", "ke", "SakaiReorderer", "SakaiRubricCriteria", "RubricsElement", "e", "id", "el", "url", "r", "error", "criterionId", "criterion", "c", "SharingChangeEvent", "sortedIds", "rating", "rat", "index", "value", "ratingPos", "nr", "newRating", "minOrMax", "totalPoints", "clone", "nc", "del", "edit", "empty", "fn", "delay", "timer", "args", "changedProperties", "pos", "ke", "Qt", "ae", "D", "tr", "i", "event", "SakaiRubricCriteria", "SakaiRubricCriteriaReadonly", "RubricsElement", "ke", "c", "ae", "r", "SakaiRubricCriteriaReadonly", "SakaiRubric", "RubricsElement", "value", "old", "search", "rubricTitle", "rubricAuthor", "rubricSite", "shared", "criteriaBlock", "ke", "D", "el", "to", "e", "url", "r", "SharingChangeEvent", "error", "saveWeightsBtn", "saveSuccessLbl", "cr", "payload", "criterionModified", "oldValue", "total", "acc", "firstCriterion", "criteria", "tr", "sakaiItemDelete", "spaceBarKeyCode", "criterions", "minOrMax", "totalPoints", "criterion", "rating", "SakaiRubric", "rubricName", "rubricTitle", "rubricCreator", "rubricModified", "SakaiRubricsList", "RubricsElement", "value", "search", "rubric", "ke", "Qt", "r", "url", "rubrics", "error", "nr", "e", "tmp", "SharingChangeEvent", "rubricType", "ascending", "a", "b", "SakaiRubricsList", "SakaiRubricReadonly", "SakaiRubric", "ke", "e", "SakaiRubricReadonly", "SakaiRubricsHelpers", "_SakaiRubricsHelpers", "response", "baseUrl", "extraOptions", "url", "usp", "k", "v", "options", "body", "acc", "rubricName", "rubricTitle", "rubricCreator", "rubricModified", "SakaiRubricsSharedList", "SakaiRubricsList", "ke", "r", "rubrics", "error", "e", "SakaiRubricsHelpers", "rubricType", "ascending", "a", "b", "SakaiRubricsSharedList", "SakaiRubricsManager", "RubricsElement", "siteRubricsBlock", "sharedRubricsBlock", "ke", "ae", "e", "rubricList", "event", "sortInput", "rubricClass", "rubricType", "arrowUpIcon", "arrowDownIcon", "selector", "ascending", "item", "SakaiRubricsManager"]
}
