{
  "version": 3,
  "sources": ["../node_modules/@sakai-ui/sakai-toggle/src/SakaiToggle.js", "../node_modules/@sakai-ui/sakai-toggle/sakai-toggle.js", "../node_modules/@sakai-ui/sakai-conversations/src/SakaiConversationsSettings.js", "../node_modules/@sakai-ui/sakai-conversations/sakai-conversations-settings.js"],
  "sourcesContent": ["import { css, html, LitElement } from \"lit\";\n\nexport class SakaiToggle extends LitElement {\n\n  static properties = {\n\n    onText: { attribute: \"text-on\", type: String },\n    offText: { attribute: \"text-off\", type: String },\n    labelledBy: { attribute: \"labelled-by\", type: String },\n    on: { type: Boolean },\n  };\n\n  toggle(e) {\n\n    e.stopPropagation();\n\n    this.on = !this.on;\n\n    this.dispatchEvent(new CustomEvent(\"toggled\", { detail: { on: this.on }, bubbles: true }));\n  }\n\n  keyup(e) {\n    (e.keyCode === 13 || e.keyCode === 32) && this.toggle(e);\n  }\n\n  get checked() {\n    return this.on;\n  }\n\n  render() {\n\n    return html`\n      <div id=\"toggle\"\n          role=\"checkbox\"\n          aria-checked=\"${this.on ? \"true\" : \"false\"}\"\n          aria-labelledby=\"${this.labelledBy}\"\n          @click=${this.toggle}\n          @keyup=${this.keyup} tabindex=\"0\">\n        <div>${this.offText}</div>\n        <div>${this.onText}</div>\n      </div>\n    `;\n  }\n\n  static styles = css`\n    #toggle {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      margin: 0 0 0 auto;     // push to far right\n      padding: var(--sakai-standard-space, 8px);\n      font-size: 12px;\n      line-height: 22px;\n      border: 1px solid var(--sakai-border-color);\n      border-radius: 4px;\n    }\n\n    #toggle div {\n      padding: 0 8px;\n      pointer-events: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n\n    #toggle[aria-checked=\"false\"] :first-child,\n    #toggle[aria-checked=\"true\"] :last-child {\n      background: var(--sakai-primary-color-1, lightgreen);\n      color: var(--sakai-text-color-inverted);\n    }\n\n    #toggle[aria-checked=\"false\"] :last-child,\n    #toggle[aria-checked=\"true\"] :first-child {\n      background-color: var(--sakai-background-color-4);\n      color: var(--sakai-text-color-1);\n    }\n  `;\n}\n", "import { SakaiToggle } from \"./src/SakaiToggle.js\";\n\ncustomElements.define(\"sakai-toggle\", SakaiToggle);\n", "import { html, nothing } from \"lit\";\nimport { SakaiElement } from \"@sakai-ui/sakai-element\";\nimport \"@sakai-ui/sakai-toggle/sakai-toggle.js\";\nimport \"@sakai-ui/sakai-editor\";\nimport \"../sakai-conversations-guidelines.js\";\n\nexport class SakaiConversationsSettings extends SakaiElement {\n\n  static properties = {\n\n    settings: { type: Object },\n    siteId: { attribute: \"site-id\", type: String },\n    _editingGuidelines: { state: true },\n    _i18n: { state: true },\n  };\n\n  constructor() {\n\n    super();\n\n    this.loadTranslations(\"conversations\").then(r => this._i18n = r);\n  }\n\n  _setSetting(e) {\n\n    e.stopPropagation();\n\n    const setting = e.target.dataset.setting;\n    const on = e.detail.on;\n\n    const url = `/api/sites/${this.siteId}/conversations/settings/${setting}`;\n    return fetch(url, {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: `${on}`,\n    })\n    .then(r => {\n\n      if (!r.ok) {\n        throw new Error(`Network error while toggling setting ${setting}`);\n      } else {\n        this.dispatchEvent(new CustomEvent(\"setting-updated\", { detail: { setting, on }, bubbles: true }));\n      }\n    })\n    .catch(error => {\n\n      console.error(error);\n      e.target.on = !on;\n    });\n  }\n\n  _saveGuidelines() {\n\n    const guidelines = this.querySelector(\"#settings-guidelines-editor\")?.getContent();\n\n    const url = `/api/sites/${this.siteId}/conversations/settings/guidelines`;\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      credentials: \"include\",\n      body: `${guidelines}`,\n    })\n    .then(r => {\n\n      if (!r.ok) {\n        throw new Error(\"Network error while saving guidelines\");\n      } else {\n        this.dispatchEvent(new CustomEvent(\"guidelines-saved\", { detail: { guidelines }, bubbles: true }));\n        this._editingGuidelines = false;\n      }\n    })\n    .catch(error => console.error(error));\n  }\n\n  _startEditingGuidelines() { this._editingGuidelines = true; }\n\n  _stopEditingGuidelines() { this._editingGuidelines = false; }\n\n  shouldUpdate() {\n    return this._i18n && this.settings;\n  }\n\n  render() {\n\n    return html`\n      <div class=\"add-topic-wrapper\">\n        <h1>${this._i18n.general_settings}</h1>\n        <div id=\"settings-grid\">\n          <div id=\"setting-allow-reactions\">${this._i18n.allow_reactions}</div>\n          <div>\n            <sakai-toggle @toggled=${this._setSetting}\n                data-setting=\"allowReactions\"\n                text-on=\"${this._i18n.on}\"\n                text-off=\"${this._i18n.off}\"\n                labelled-by=\"setting-allow-reactions\"\n                ?on=${this.settings.allowReactions}>\n            </sakai-toggle>\n          </div>\n          <div id=\"setting-allow-upvoting\">${this._i18n.allow_upvoting}</div>\n          <div>\n            <sakai-toggle @toggled=${this._setSetting}\n                data-setting=\"allowUpvoting\"\n                text-on=\"${this._i18n.on}\"\n                text-off=\"${this._i18n.off}\"\n                labelled-by=\"setting-allow-upvoting\"\n                ?on=${this.settings.allowUpvoting}>\n            </sakai-toggle>\n          </div>\n          <div id=\"setting-allow-anon-posting\">${this._i18n.allow_anon_posting}</div>\n          <div>\n            <sakai-toggle @toggled=${this._setSetting}\n                data-setting=\"allowAnonPosting\"\n                text-on=\"${this._i18n.on}\"\n                text-off=\"${this._i18n.off}\"\n                labelled-by=\"setting-allow-anon-posting\"\n                ?on=${this.settings.allowAnonPosting}>\n            </sakai-toggle>\n          </div>\n          <div id=\"setting-allow-bookmarking\">${this._i18n.allow_bookmarking}</div>\n          <div>\n            <sakai-toggle @toggled=${this._setSetting}\n                data-setting=\"allowBookmarking\"\n                text-on=\"${this._i18n.on}\"\n                text-off=\"${this._i18n.off}\"\n                labelled-by=\"setting-allow-bookmarking\"\n                ?on=${this.settings.allowBookmarking}>\n            </sakai-toggle>\n          </div>\n          <div id=\"setting-allow-pinning\">${this._i18n.allow_pinning}</div>\n          <div>\n            <sakai-toggle @toggled=${this._setSetting}\n                data-setting=\"allowPinning\"\n                text-on=\"${this._i18n.on}\"\n                text-off=\"${this._i18n.off}\"\n                labelled-by=\"setting-allow-pinning\"\n                ?on=${this.settings.allowPinning}>\n            </sakai-toggle>\n          </div>\n          <div id=\"setting-lock-site\">${this._i18n.lock_this_site}</div>\n          <div>\n            <sakai-toggle @toggled=${this._setSetting}\n                data-setting=\"siteLocked\"\n                text-on=\"${this._i18n.on}\"\n                text-off=\"${this._i18n.off}\"\n                labelled-by=\"setting-lock-site\"\n                ?on=${this.settings.siteLocked}>\n            </sakai-toggle></div>\n          <div id=\"setting-require-guidelines\">${this._i18n.enable_community_guidelines}</div>\n          <div>\n            <sakai-toggle @toggled=${this._setSetting}\n                data-setting=\"requireGuidelinesAgreement\"\n                text-on=\"${this._i18n.on}\"\n                text-off=\"${this._i18n.off}\"\n                labelled-by=\"setting-require-guidelines\"\n                ?on=${this.settings.requireGuidelinesAgreement}>\n            </sakai-toggle>\n          </div>\n        </div>\n        ${this.settings.requireGuidelinesAgreement ? html`\n        <div id=\"settings-guidelines-block\">\n          <div id=\"settings-guidelines-preview\">\n            <div>${this._i18n.community_guidelines_preview_heading}</div>\n            <sakai-conversations-guidelines guidelines=\"${this.settings.guidelines}\"></sakai-conversations-guidelines>\n          </div>\n          ${this._editingGuidelines ? html`\n          <div id=\"settings-guidelines-editor-block\">\n            <sakai-editor id=\"settings-guidelines-editor\" content=\"${this.settings.guidelines}\"></sakai-editor>\n            <div class=\"act\">\n              <input type=\"button\" class=\"active\" @click=${this._saveGuidelines} value=\"${this._i18n.save}\">\n              <input type=\"button\" class=\"active\" @click=\"${this._stopEditingGuidelines}\" value=\"${this._i18n.cancel}\">\n            </div>\n          </div>\n          ` : html`\n          <div class=\"act\">\n            <input type=\"button\" class=\"active\" @click=\"${this._startEditingGuidelines}\" value=\"${this._i18n.edit_guidelines}\">\n          </div>\n          `}\n        </div>\n        ` : nothing }\n      </div>\n    `;\n  }\n}\n", "import { SakaiConversationsSettings } from './src/SakaiConversationsSettings.js';\n\ncustomElements.define('sakai-conversations-settings', SakaiConversationsSettings);\n"],
  "mappings": "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",
  "names": ["SakaiToggle", "h", "e", "ke", "i", "SakaiToggle", "SakaiConversationsSettings", "SakaiElement", "r", "e", "setting", "on", "url", "error", "guidelines", "ke", "D", "SakaiConversationsSettings"]
}
