<!DOCTYPE html>
<html xmlns:wicket="http://wicket.apache.org">

<body>
<wicket:panel>
    <div id="studentGradesComparison-ModalContent">
        <div class="studentGradesComparison-Header">
            <span>
               <wicket:message key="comparegrades.modal.subtitle.label" />
            </span>
        </div>
        <div class="studentGradesComparisonCourse-TableContainer">
            <table class="table table-bordered table-condensed table-hover">
                <thead>
                <tr>
                    <th wicket:id="studentNameHeaderLabel" class="gb-comparing-student-name-header">
                        Student Name
                    </th>
                    <th wicket:id="gradeHeaderLabel" class="gb-comparing-grades-header">
                        Grade
                    </th>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        function generateTableComparison(data) {
            let tableBody = document.querySelector(".studentGradesComparisonCourse-TableContainer > table tbody");

            data.forEach(function(rowData, index) {
                let row = document.createElement('tr');

                let studentCell = document.createElement('td');
                let text = rowData.studentDisplayName || '\u200b';
                studentCell.appendChild(document.createTextNode(text.replace('&#39;', "'")));
                row.appendChild(studentCell);

                let gradeCell = document.createElement('td');
                let gradeText = rowData.grade || '\u200b';
                gradeCell.appendChild(document.createTextNode(gradeText));
                row.appendChild(gradeCell);

                if (rowData.isCurrentUser) {
                    row.style.fontWeight = 'bold';
                    studentCell.style.backgroundColor = 'var(--sakai-active-color-1)';
                    gradeCell.style.backgroundColor = 'var(--sakai-active-color-1)';
                }

                tableBody.appendChild(row);
            });
        }

        generateTableComparison(window.GbComparisonData);

        var $table = $(".studentGradesComparisonCourse-TableContainer table");
        $table.tablesorter({
            theme: "bootstrap",
            widthFixed: true,
            headerTemplate: '{content} {icon}',
            widgets: ["uitheme"],
            sortReset: true,
            textExtraction: function(node) {
                return $(node).text().trim();
            },
            cssInfoBlock: "gb-summary-category-tbody"
        });
    </script>
</wicket:panel>
</body>
</html>